/**
 * xe-ajax.js v3.5.3
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";var e="undefined",a=encodeURIComponent,r=typeof window===e&&typeof process!==e,t=typeof AbortController!==e&&typeof AbortSignal!==e,n=typeof console===e?"":console,o="";function u(t){return!!t&&t.constructor===Object}function c(t){return!!t&&t.constructor===Array}function s(t,e){for(var n=t.length-1;0<=n;n--)if(e===t[n])return n;return-1}function f(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function i(t){return t.origin||(r?"":o.origin||o.protocol+"//"+o.host)}r||(o=location);var y={IS_N:r,IS_F:!r&&!!self.fetch,IS_A:!(typeof Blob===e||typeof FormData===e||typeof FileReader===e),IS_FAC:t,IS_DP:Object.defineProperty&&{}.__defineGetter__,isFData:function(t){return typeof FormData!==e&&t instanceof FormData},isURLSParams:function(t){return typeof URLSearchParams!==e&&t instanceof URLSearchParams},isCrossOrigin:function(t){if(!r){var e=(""+t).match(/(\w+:)\/{2}((.*?)\/|(.*)$)/);if(e&&2<e.length)return e[1]!==o.protocol||e[2].split("/")[0]!==o.host}return!1},isStr:function(t){return"string"==typeof t},isObj:function(t){return t&&"object"==typeof t},isPlainObject:u,isFn:function(t){return"function"==typeof t},createErr:function(t){return new Error(t)},err:n.error?function(t){n.error(t)}:function(){},getOrigin:i,getBaseURL:function(t){if(t.baseURL)return t.baseURL;if(r)return"";var e=o.pathname,n=s(e,"/")+1;return i(t)+(n===e.length?e:e.substring(0,n))},objectEach:f,serialize:function(t){var n,r=[];return f(t,function(t,e){void 0!==t&&(n=c(t),u(t)||n?r=r.concat(function r(t,o,s){var i=[];return f(t,function(t,e){var n=c(t);u(t)||n?i=i.concat(r(t,o+"["+e+"]",n)):i.push(a(o+"["+(s?"":e)+"]")+"="+a(null===t?"":t))}),i}(t,e,n)):r.push(a(e)+"="+a(null===t?"":t)))}),r.join("&").replace(/%20/g,"+")},assign:Object.assign||function(t){for(var e,n=arguments,r=1,o=n.length;r<o;r++)for(var s in e=n[r])e.hasOwnProperty(s)&&(t[s]=e[s]);return t},trim:function(t){return(""+t).replace(/(^\s*)|(\s*$)/g,"")},includes:function(t,e){return-1<s(t,e)},arrayEach:function(t,e,n){for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)},headersEach:function(t,e){t&&t.forEach&&t.forEach(e)},clearContext:function(t){t.$context=t.$Promise=null}},d={method:"GET",mode:"cors",cache:"default",credentials:"same-origin",redirect:"follow",bodyType:"json-data",headers:{Accept:"application/json, text/plain, */*"}};function h(t){Object.assign(this,{autoCompute:!0,fixed:2,meanSpeed:0,onDownloadProgress:null,onUploadProgress:null},t,{_progress:{value:0,total:0,loaded:0}})}function l(t){return(""+t).toLowerCase()}function p(t,e){var n,r,o;this.$index=0,this.$list=(n=t,r=e,o=[],y.objectEach(n,function(t,e){o.push([e,t,[e,t]][r])}),o),this.next=function(){return e=(t=this).$list[this.$index],{done:r=t.$index++>=t.$list.length,value:r?n:e};var t,e,n,r}}function m(t){var n=this;n._d={},y[t instanceof g?"headersEach":"objectEach"](t,function(t,e){n.set(e,t)})}y.IS_DP&&y.arrayEach("time,speed,loaded,value,total,remaining".split(","),function(t){Object.defineProperty(h.prototype,t,{get:function(){return this._progress[t]}})});var v=m.prototype;v.set=function(t,e){this._d[l(t)]=e},v.get=function(t){var e=l(t);return this.has(e)?this._d[e]:null},v.append=function(t,e){var n=l(t),r=this._d;this.has(n)?r[n]=r[n]+", "+e:r[n]=""+e},v.has=function(t){return this._d.hasOwnProperty(l(t))},v.keys=function(){return new p(this._d,0)},v.values=function(){return new p(this._d,1)},v.entries=function(){return new p(this._d,2)},v.delete=function(t){delete this._d[l(t)]},v.forEach=function(t,e){y.objectEach(this._d,t,e)};var g="undefined"==typeof Headers?m:Headers;function b(r,e,o){this.locked=!1,this._getBody=function(){var n=this,t=e.$Promise||Promise;return y.IS_DP?o._response.bodyUsed=!0:o.bodyUsed=!0,new t(function(t,e){n.locked?e(y.createErr("body stream already read")):(n.locked=!0,t(r))},e.$context)}}function _(){this.onaborted=null,y.IS_DP?this._store={aborted:!1}:this.aborted=!1}y.IS_DP&&Object.defineProperty(_.prototype,"aborted",{get:function(){return this._store.aborted}});var P=[];function x(t){for(var e=0,n=P.length;e<n;e++)if(t===P[e][0])return e;return-1}function w(){this.signal=new _}_.prototype.install=function(t){var e=t.signal;if(e){var n=x(e);-1<n?P[n][1].push(t):P.push([e,[t]])}},w.prototype.abort=function(){var t=x(this.signal);if(-1<t){var n=P[t];y.arrayEach(n[1],function(t){var e=n[0];t.abort(),y.IS_DP?e._store.aborted=!0:e.aborted=!0}),P.splice(t,1)}};var S=w,E={resolves:[],rejects:[]},R={resolves:[],rejects:[]};function j(t,e){y.includes(t,e)||t.push(e)}function $(n){return function(t,e){j(n.resolves,t),j(n.rejects,e)}}function T(t,r,e){var o=r.$Promise||Promise,n=o.resolve(e,r.$context);return y.arrayEach(t,function(t){n=n.then(function(n){return new o(function(e){t(n,function(t){e(t&&t.body&&t.status?J.toResponse(t,r):n)},r)},r.$context)}).catch(y.err)}),n}var O={request:{use:$(E)},response:{use:$(R)}};O.request.use(function(t,e){var n=t.headers,r=t.body,o=t.method;r&&"GET"!==o&&"HEAD"!==o&&(y.isFData(r)||n.set("Content-Type",y.isURLSParams(r)||"form-data"===t.bodyType?"application/x-www-form-urlencoded":"application/json; charset=utf-8")),y.isCrossOrigin(t.getUrl())&&n.set("X-Requested-With","XMLHttpRequest"),e()});var D={interceptors:O,requests:function(t){var r=t.$Promise||Promise,e=r.resolve(t,t.$context);return y.arrayEach(E.resolves,function(n){e=e.then(function(e){return new r(function(t){n(e,function(){t(e)})},t.$context)}).catch(y.err)}),e},toResolves:function(t,e,n,r){T(R.resolves,t,e).then(n)},toRejects:function(t,e,n,r){T(R.rejects,t,e).then(function(t){(J.isResponse(t)?n:r)(t)})}};function A(t){y.assign(this,{url:"",body:"",params:"",signal:""},t),this.headers=new g(t.headers),this.method=this.method.toLocaleUpperCase(),this.bodyType=this.bodyType.toLowerCase();var e=this.signal;e&&e.install&&e.install(this)}var I=A.prototype,U=/(\w+:)\/{2}.+/;function C(t){return 200<=t.status&&t.status<300}function F(t,e,n){this._body=t,this._request=n;var r=e.status,o=n.validateStatus||C,s=this._response={body:new b(t,n,this),bodyUsed:!1,url:n.url,status:r,statusText:e.statusText,redirected:302===r,headers:new g(e.headers||{}),type:"basic"};y.IS_DP?s.ok=o(this):(y.assign(this,s),this.ok=o(this))}I.abort=function(){this.xhr&&(this.xhr.abort(),this._noA&&this.xhr.onabort()),this.$abort=!0},I.getUrl=function(){var t,e=this.url,n=this.params,r=y.getOrigin(this),o=this.transformParams,s=y.includes(["no-store","no-cache","reload"],this.cache)?{_t:(new Date).getTime()}:{};return e?(o&&(n=this.params=o(n||{},this)),(n=!n||y.isFData(n)||y.isURLSParams(n)?y.serialize(s):y.isStr(n)?n:(this.paramsSerializer||y.serialize)(y.assign(s,n),this))&&(e+=(-1===e.indexOf("?")?"?":"&")+n),U.test(e)?e:0===e.indexOf("//")?((t=r.match(U))?t[1]:y.IS_N?"":location.protocol)+e:0===e.indexOf("/")?r+e:y.getBaseURL(this).replace(/\/$/,"")+"/"+e):e},I.getBody=function(){var t=null,e=this.body,n=this.method,r=this.transformBody,o=this.stringifyBody;if(e){if("GET"===n||"HEAD"===n)throw y.createErr("Request with GET/HEAD method cannot have body");r&&(e=this.body=r(e,this)||e),t=o?o(e,this):y.isURLSParams(e)?e.toString():y.isFData(e)||y.isStr(e)?e:"form-data"===this.bodyType?y.serialize(e):JSON.stringify(e)}return t};var q=decodeURIComponent,B=F.prototype;function L(t,n){return new(t.$Promise||Promise)(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}},t.$context)}function H(t){return t&&t.constructor===F}function N(t){return y.isStr(t)?t:JSON.stringify(t)}function k(t,e,n){var r={status:e.status,statusText:e.statusText,headers:e.headers};return new F(t=y.IS_A?t instanceof Blob?t:new Blob([N(t)]):N(t),r,n)}y.IS_DP&&y.arrayEach("body,bodyUsed,url,headers,status,statusText,ok,redirected,type".split(","),function(t){Object.defineProperty(B,t,{get:function(){return this._response[t]}})}),B.clone=function(){if(this.bodyUsed)throw y.createErr("Failed to execute 'clone' on 'Response': Response body is already used");return new F(this._body,this,this._request)},B.json=function(){return this.text().then(function(t){return JSON.parse(t)})},B.text=function(){return this.body._getBody(this)},y.IS_A&&(B.text=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=L(r,e);return e.readAsText(t),n})},B.blob=function(){return this.body._getBody(this)},B.arrayBuffer=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=L(r,e);return e.readAsArrayBuffer(t),n})},B.formData=function(){return this.text().then(function(t){var o=new FormData;return y.arrayEach(y.trim(t).split("&"),function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");o.append(q(n),q(r))}}),o})});var J={isResponse:H,toResponse:function(e,n){var t,r=n.$Promise||Promise;return(t=e)&&"undefined"!=typeof Response&&t.constructor===Response?n.validateStatus?e.text().then(function(t){return k(t,e,n)}):r.resolve(e):r.resolve(H(e)?e:k(e.body,e,n))}};function G(t,e,n){var r,o,s,i,a=!1,u=t.getUrl(),c=t.timeout,f=t.credentials,d=t.$XMLHttpRequest||XMLHttpRequest,h=t.xhr=new d,l=t.progress,p=function(){try{e(new F(h[y.IS_A?"response":"responseText"],{status:h.status,statusText:h.statusText,headers:function(t){var e,n={},r=y.trim(t.getAllResponseHeaders());r&&y.arrayEach(r.split("\n"),function(t){e=t.indexOf(":"),n[y.trim(t.slice(0,e))]=y.trim(t.slice(e+1))});return n}(h)},t))}catch(t){e({status:0,body:null})}a=!0};if("same-origin"===t.mode&&y.isCrossOrigin(u))throw n(),y.createErr("Fetch API cannot load "+u+'. Request mode is "same-origin" but the URL\'s origin is not same as the request origin '+y.getOrigin(t)+".");h._request=t,void 0===h.onload?h.onreadystatechange=function(){4===h.readyState&&p()}:h.onload=p,h.ontimeout=p,h.onerror=function(){n()},t._noA=void 0===h.onabort,h.onabort=function(){a||(a=!0,n("ERR_A"))},l&&(r=l.onUploadProgress,o=l.onDownloadProgress,s=l.autoCompute,i=h.upload,r&&i&&(s?z(i,r,l):i.onprogress=r),o&&(s?z(h,o,l):h.onprogress=o)),h.open(t.method,u,!0),y.headersEach(t.headers,function(t,e){h.setRequestHeader(e,t)}),y.IS_A&&(h.responseType="blob"),"include"===f?h.withCredentials=!0:"omit"===f&&(h.withCredentials=!1),c&&(h.timeout=c),h.send(t.getBody()),t.$abort&&h.abort()}function z(t,a,u){var e=(new Date).getTime(),c=[],f=y.IS_DP?u._progress:u,d=u.meanSpeed;if(f.value=0,f.time=e,t.onprogress=function(t){var e=(new Date).getTime(),n=f.time,r=f.loaded?f.loaded.value:0,o=t.total,s=t.loaded,i=(s-r)/(e-n)*1e3;t.lengthComputable&&(f.value=Math.round(s/o*100)),f.total=W(o,u),f.loaded=W(s,u),f.speed=W(i,u),f.time=e,f.remaining=Math.ceil((o-s)/i),c.push({total:o,loaded:s,speed:i,evnt:t}),d||a(t)},d)var n,r,o,s,i,h=setInterval(function(){if(f.value<100){if(r=c.length){for(s={},o=i=0;o<r;o++)s=c[0],i+=s.speed;n=i/r,f.speed=W(n,u),f.remaining=Math.ceil((s.total-s.loaded)/n),c=[],a(s.evnt)}}else clearInterval(h)},d)}var M=["B","KB","MB","GB","TB"],X=1024,K=M.length;function W(t,e){for(var n="",r=t,o=0;o<K&&(n=M[o],X<=r);o++)r/=X;return{value:t,size:parseFloat(r.toFixed(e.fixed)),unit:n}}function Q(e,n,r){var t=e.$fetch||self.fetch,o={_request:e,body:e.getBody()},s=e.signal;y.arrayEach("method,headers,signal,mode,cache,credentials,redirect,referrer,referrerPolicy,keepalive,integrity".split(","),function(t){e[t]&&(o[t]=e[t])}),s&&s.aborted?r("ERR_A"):t(e.getUrl(),o).then(function(t){J.toResponse(t,e).then(n)}).catch(function(t){r()})}var V=y.IS_N?sendHttp:y.IS_F?function(t){return function(t,e){if(!t.progress&&!t.timeout){if(t.$fetch)return e?G:Q;if(y.IS_F)return y.IS_FAC?Q:e?G:Q}return G}(t,t.signal).apply(this,arguments)}:G,Y=0,Z="undefined"==typeof window?"":window,tt=Z?Z.document:"";function et(t,e,n){var r=t.script,o=tt.body;r.parentNode===o&&o.removeChild(r);try{delete Z[e]}catch(t){Z[e]=n}}var nt={ERR_A:"The user aborted a request",ERR_F:"Network request failed"};function rt(t){var r=new A(y.assign({},d,{headers:y.assign({},d.headers)},t));return new(r.$Promise||Promise)(function(e,n){return D.requests(r).then(function(){(r.jsonp?function(e,n,t){var r,o,s=!1,i=e.timeout,a=e.jsonpCallback,u=clearTimeout,c=e.script=tt.createElement("script");if(a||(a=e.jsonpCallback="jsonp_xe_"+(new Date).getTime()+"_"+ ++Y),y.isFn(e.$jsonp))return e.$jsonp(c,e).then(function(t){J.toResponse({status:200,body:t},e).then(n)}).catch(function(){t()});r=e.getUrl(),Z[a]=function(t){s||(u(o),et(e,a),n({status:200,body:t}))},c.type="text/javascript",c.src=r+(-1===r.indexOf("?")?"?":"&")+e.jsonp+"="+a,c.onerror=function(){s||(u(o),et(e,a),t())},i&&(o=setTimeout(function(){s=!0,et(e,a),n({status:0,body:null})},i)),tt.body.appendChild(c)}:V)(r,function(t){D.toResolves(r,J.toResponse(t,r),e,n)},function(t){D.toRejects(r,y.createErr(nt[t||"ERR_F"]),e,n)})})},r.$context)}rt.interceptors=D.interceptors,rt.serialize=y.serialize,rt.Progress=h,rt.AbortController=S,rt.use=function(t){t.install(rt)},rt.setup=function(t){y.assign(d,t)};var ot=y.clearContext;function st(t,e,n){var r=y.assign({method:t,$context:rt.$context,$Promise:rt.$Promise},e,n);return ot(rt),r}function it(t){return function(){return rt(t.apply(this,arguments))}}function at(t,e,n,r,o){return t?{data:e,status:n,statusText:r,headers:o}:e}function ut(n,s){return function(){var t=n.apply(this,arguments),e=t.$Promise||Promise;return rt(t).catch(function(t){return e.reject(at(s,"","failed",t.message||t,{}),this)}).then(function(o){return new e(function(t,e){var r=o.ok?t:e;o.text().then(function(e){try{return JSON.parse(e)}catch(t){return e}}).catch(function(t){return""}).then(function(t){var e,n;r(at(s,t,o.status,o.statusText,(e=o,n={},y.headersEach(e.headers,function(t,e){n[e]=t}),n)))})},this)})}}function ct(t){return ut(t,!0)}function ft(t){return ut(t)}function dt(n){return function(t,e){return st(n,{url:t},e)}}function ht(r,o){return function(t,e,n){return st(r,y.assign({url:t,params:e},o),n)}}function lt(r){return function(t,e,n){return st(r,{url:t,body:e},n)}}var pt=dt("HEAD"),yt=dt("DELETE"),mt=ht("GET",{jsonp:"callback"}),vt=ht("GET"),gt=lt("POST"),bt=lt("PUT"),_t=lt("PATCH"),Pt={doAll:function(t){var e=rt.$Promise||Promise,n=rt.$context;return ot(rt),e.all(t.map(function(t){return t instanceof e||t instanceof Promise?t:y.isObj(t)?rt(y.assign({$context:n,$Promise:e},t)):t}),n)},ajax:rt,fetch:it(dt("GET")),fetchGet:it(vt),fetchPost:it(gt),fetchPut:it(bt),fetchDelete:it(yt),fetchPatch:it(_t),fetchHead:it(pt),fetchJsonp:it(mt),doGet:ct(vt),doPost:ct(gt),doPut:ct(bt),doDelete:ct(yt),doPatch:ct(_t),doHead:ct(pt),doJsonp:ct(mt),getJSON:ft(vt),postJSON:ft(gt),putJSON:ft(bt),deleteJSON:ft(yt),patchJSON:ft(_t),headJSON:ft(pt),jsonp:ft(mt)};return rt.mixin=function(t){y.objectEach(t,function(e,t){rt[t]=y.isFn(e)?function(){var t=e.apply(rt.$context,arguments);return ot(rt),t}:e})},rt.mixin(Pt),rt});