/**
 * xe-ajax.js v3.4.5
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";var e="undefined",s=encodeURIComponent,n=typeof window===e&&typeof process!==e,r="";function a(t){return!!t&&t.constructor===Object}function u(t){return!!t&&t.constructor===Array}function o(t,e){for(var n=t.length-1;0<=n;n--)if(e===t[n])return n;return-1}function c(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function i(){return n?"":r.origin||r.protocol+"//"+r.host}n||(r=location);var f={_N:n,_F:!n&&!!self.fetch,_A:!(typeof Blob===e||typeof FormData===e||typeof FileReader===e),isFData:function(t){return typeof FormData!==e&&t instanceof FormData},isCrossOrigin:function(t){return!n&&/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)&&(RegExp.$1!==r.protocol||RegExp.$2.split("/")[0]!==r.host)},isStr:function(t){return"string"==typeof t},isObj:function(t){return t&&"object"==typeof t},isPlainObject:a,isFn:function(t){return"function"==typeof t},getOrigin:i,getBaseURL:function(){if(n)return"";var t=r.pathname,e=o(t,"/")+1;return i()+(e===t.length?t:t.substring(0,e))},objectEach:c,serialize:function(t){var n=[];return c(t,function(t,e){void 0!==t&&(a(t)||u(t)?n=n.concat(function n(t,r,o){var i=[];return c(t,function(t,e){a(t)||u(t)?i=i.concat(n(t,r+"["+e+"]",u(t))):i.push(s(r+"["+(o?"":e)+"]")+"="+s(null===t?"":t))}),i}(t,e,u(t))):n.push(s(e)+"="+s(null===t?"":t)))}),n.join("&").replace(/%20/g,"+")},assign:Object.assign||function(t){for(var e,n=arguments,r=1,o=n.length;r<o;r++)for(var i in e=n[r])e.hasOwnProperty(i)&&(t[i]=e[i]);return t},includes:function(t,e){return-1<o(t,e)},arrayEach:function(t,e,n){for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)},clearContext:function(t){t.$context=t.$Promise=null}},d={method:"GET",baseURL:f.getBaseURL(),mode:"cors",cache:"default",credentials:"same-origin",redirect:"follow",bodyType:"json-data",headers:{Accept:"application/json, text/plain, */*"},validateStatus:function(t){return 200<=t.status&&t.status<300}};function h(t){return(""+t).toLowerCase()}function t(t,e){this.$index=0,this.$list=function(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];n.push([r,o,[r,o]][e])}return n}(t,e),this.next=function(){return e=(t=this).$list[this.$index],{done:n=t.$index++>=t.$list.length,value:n?void 0:e};var t,e,n}}function l(t){var n=this,e=function(t,e){n.set(e,t)};n._d={},t instanceof y?t.forEach(e):f.objectEach(t,e)}var p=l.prototype;p.set=function(t,e){this._d[h(t)]=e},p.get=function(t){var e=h(t);return this.has(e)?this._d[e]:null},p.append=function(t,e){var n=h(t);this.has(n)?this._d[n]=this._d[n]+", "+e:this._d[n]=""+e},p.has=function(t){return this._d.hasOwnProperty(h(t))},p.keys=function(){return new t(this._d,0)},p.values=function(){return new t(this._d,1)},p.entries=function(){return new t(this._d,2)},p.delete=function(t){delete this._d[h(t)]},p.forEach=function(t,e){f.objectEach(this._d,t,e)};var y="undefined"==typeof Headers?l:Headers;function v(r,e,o){this.locked=!1,this._getBody=function(){var n=this,t=e.$Promise||Promise;return o._response.bodyUsed=!0,new t(function(t,e){n.locked?e(new TypeError("body stream already read")):(n.locked=!0,t(r))},e.$context)}}function b(){this.onaborted=null,this._abortSignal={aborted:!1}}Object.defineProperty(b.prototype,"aborted",{get:function(){return this._abortSignal.aborted}});var m=[];function g(t){for(var e=0,n=m.length;e<n;e++)if(t===m[e][0])return e}function x(){this.signal=new b}b.prototype.install=function(t){var e=t.signal;if(e){var n=g(e);void 0===n?m.push([e,[t]]):m[n][1].push(t)}},x.prototype.abort=function(){var t=g(this.signal);if(void 0!==t){var e=m[t];f.arrayEach(e[1],function(t){t.abort(),e[0]._abortSignal.aborted=!0}),m.splice(t,1)}};var w="undefined"==typeof AbortController?x:AbortController,_={resolves:[],rejects:[]},$={resolves:[],rejects:[]};function j(t,e){f.includes(t,e)||t.push(e)}function P(n){return function(t,e){j(n.resolves,t),j(n.rejects,e)}}function T(t,r,e){var o=r.$Promise||Promise,n=o.resolve(e,r.$context);return f.arrayEach(t,function(t){n=n.then(function(n){return new o(function(e){t(n,function(t){e(t&&t.body&&t.status?B.toResponse(t,r):n)},r)},r.$context)}).catch(function(t){console.error(t)})}),n}var E={request:{use:P(_)},response:{use:P($)}};E.request.use(function(t,e){var n=t.headers,r=t.body,o=t.method;r&&"GET"!==o&&"HEAD"!==o&&(f.isFData(r)||n.set("Content-Type","json-data"===t.bodyType?"application/json; charset=utf-8":"application/x-www-form-urlencoded")),f.isCrossOrigin(t.getUrl())&&n.set("X-Requested-With","XMLHttpRequest"),e()});var R={interceptors:E,requests:function(t){var r=t.$Promise||Promise,e=r.resolve(t,t.$context);return f.arrayEach(_.resolves,function(n){e=e.then(function(e){return new r(function(t){n(e,function(){t(e)})},t.$context)}).catch(function(t){console.error(t)})}),e},toResolves:function(t,e,n,r){T($.resolves,t,e).then(n)},toRejects:function(t,e,n,r){T($.rejects,t,e).then(function(t){(B.isResponse(t)?n:r)(t)})}};function O(t){f.assign(this,{url:"",body:"",params:"",signal:""},t),this.headers=new y(t.headers),this.method=this.method.toLocaleUpperCase(),this.bodyType=this.bodyType.toLowerCase();var e=this.signal;e&&e.install&&e.install(this)}var A=O.prototype;function C(t,e,n){this._body=t,this._request=n;var r=e.status;(this._response={body:new v(t,n,this),bodyUsed:!1,url:n.url,status:r,statusText:e.statusText,redirected:302===r,headers:new y(e.headers||{}),type:"basic"}).ok=n.validateStatus(this)}A.abort=function(){var t=this.xhr;t&&t.abort(),this.$abort=!0},A.getUrl=function(){var t=this.url,e=this.params;if(t){var n=f.includes(["no-store","no-cache","reload"],this.cache)?{_t:Date.now()}:{},r=this.transformParams;return r&&(e=this.params=r(e||{},this)),(e=e&&!f.isFData(e)?f.isStr(e)?e:(this.paramsSerializer||f.serialize)(f.assign(n,e),this):f.serialize(n))&&(t+=(-1===t.indexOf("?")?"?":"&")+e),/\w+:\/{2}.*/.test(t)?t:0===t.indexOf("//")?(f._N?"":location.protocol)+t:0===t.indexOf("/")?f.getOrigin()+t:this.baseURL.replace(/\/$/,"")+"/"+t}return t},A.getBody=function(){var t=null,e=this.body,n=this.method;if(e&&"GET"!==n&&"HEAD"!==n){var r=this.transformBody,o=this.stringifyBody;r&&(e=this.body=r(e,this)||e),t=o?o(e,this):f.isFData(e)||f.isStr(e)?e:"form-data"===this.bodyType?f.serialize(e):JSON.stringify(e)}return t};var S=decodeURIComponent,q=C.prototype;function F(t,n){return new(t.$Promise||Promise)(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}},t.$context)}function U(t){if(t){var e=t.constructor;return"undefined"!=typeof Response&&e===Response||e===C}return!1}function D(t){return f.isStr(t)?t:JSON.stringify(t)}f.arrayEach("body,bodyUsed,url,headers,status,statusText,ok,redirected,type".split(","),function(t){Object.defineProperty(q,t,{get:function(){return this._response[t]}})}),q.clone=function(){if(this.bodyUsed)throw new TypeError("Failed to execute 'clone' on 'Response': Response body is already used");return new C(this._body,this,this._request)},q.json=function(){return this.text().then(function(t){return JSON.parse(t)})},q.text=function(){return this.body._getBody(this)},f._A&&(q.text=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=F(r,e);return e.readAsText(t),n})},q.blob=function(){return this.body._getBody(this)},q.arrayBuffer=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=F(r,e);return e.readAsArrayBuffer(t),n})},q.formData=function(){return this.text().then(function(t){var o=new FormData;return f.arrayEach(t.trim().split("&"),function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");o.append(S(n),S(r))}}),o})});var B={isResponse:U,toResponse:function(t,e){if(U(t))return t;var n=t.body,r={status:t.status,statusText:t.statusText,headers:t.headers};return new C(n=f._A?n instanceof Blob?n:new Blob([D(n)]):D(n),r,e)}};function H(r,o,t){var e=r.getUrl(),n=r.timeout,i=r.credentials;if("same-origin"===r.mode&&f.isCrossOrigin(e))throw t(),new TypeError("Fetch API cannot load "+e+'. Request mode is "same-origin" but the URL\'s origin is not same as the request origin '+f.getOrigin()+".");var s=r.$XMLHttpRequest||XMLHttpRequest,a=r.xhr=new s;a._request=r,a.open(r.method,e,!0),n&&setTimeout(function(){a.abort()},n),r.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.onload=function(){var t,n,e;o(new C(a.response,{status:a.status,statusText:a.statusText,headers:(t=a,n={},e=t.getAllResponseHeaders().trim(),f.arrayEach(e.split("\n"),function(t){var e=t.indexOf(":");n[t.slice(0,e).trim()]=t.slice(e+1).trim()}),n)},r))},a.onerror=function(){t()},a.ontimeout=function(){t("timeout")},a.onabort=function(){t("aborted")},f._A&&(a.responseType="blob"),"include"===i?a.withCredentials=!0:"omit"===i&&(a.withCredentials=!1),a.send(r.getBody()),r.$abort&&a.abort()}function N(e,n,r){var o="",t=e.$fetch||self.fetch,i=e.timeout,s={_request:e,method:e.method,mode:e.mode,cache:e.cache,credentials:e.credentials,redirect:e.redirect,body:e.getBody(),headers:e.headers},a=e.signal,u=clearTimeout;i&&(o=setTimeout(function(){r("timeout")},i)),a&&a.aborted?r("aborted"):t(e.getUrl(),s).then(function(t){u(o),n(B.toResponse(t,e))}).catch(function(t){u(o),r()})}var L=f._N?sendHttp:f._F?function(t){return(e=t,n=e.signal,e.$fetch?n?H:N:f._F?"undefined"!=typeof AbortController&&"undefined"!=typeof AbortSignal?N:n?H:N:H).apply(this,arguments);var e,n}:H,k=0,J="undefined"==typeof window?"":window,G=J?J.document:"";function z(t,e){var n=t.script,r=G.body;n.parentNode===r&&r.removeChild(n);try{delete J[e]}catch(t){J[e]=void 0}}var X={aborted:"The user aborted a request.",timeout:"Request timeout.",failed:"Network request failed."};function I(t){var r=new O(f.assign({},d,{headers:f.assign({},d.headers)},t));return new(r.$Promise||Promise)(function(e,n){return R.requests(r).then(function(){(r.jsonp?function(e,n,t){var r=e.timeout,o=e.jsonpCallback,i=e.script=G.createElement("script");if(o||(o=e.jsonpCallback="jsonp_xe_"+Date.now()+"_"+ ++k),f.isFn(e.$jsonp))return e.$jsonp(i,e).then(function(t){n(B.toResponse({status:200,body:t},e))}).catch(function(){t()});var s=e.getUrl();J[o]=function(t){z(e,o),n({status:200,body:t})},i.type="text/javascript",i.src=s+(-1===s.indexOf("?")?"?":"&")+e.jsonp+"="+o,i.onerror=function(){z(e,o),n()},r&&setTimeout(function(){z(e,o),n("timeout")},r),G.body.appendChild(i)}:L)(r,function(t){R.toResolves(r,B.toResponse(t,r),e,n)},function(t){R.toRejects(r,new TypeError(X[t||"failed"]),e,n)})})},r.$context)}I.version="3.4.5",I.interceptors=R.interceptors,I.serialize=f.serialize,I.AbortController=w,I.use=function(t){t.install(I)},I.setup=function(t){f.assign(d,t)};var M=f.clearContext;function W(t,e,n){var r=f.assign({method:t,$context:I.$context,$Promise:I.$Promise},e,n);return M(I),r}function K(t){return function(){return I(t.apply(this,arguments))}}function Q(t,e,n,r,o){return t?{data:e,status:n,statusText:r,headers:o}:e}function V(n,i){return function(){var t=n.apply(this,arguments),e=t.$Promise||Promise;return I(t).catch(function(t){return e.reject(Q(i,"","failed",t.message||t,{}),this)}).then(function(o){return new e(function(t,e){var r=o.ok?t:e;o.clone().json().catch(function(t){return o.clone().text()}).then(function(t){var n;r(Q(i,t,o.status,o.statusText,(n={},o.headers.forEach(function(t,e){n[e]=t}),n)))})},this)})}}function Y(t){return V(t,!0)}function Z(t){return V(t)}function tt(n){return function(t,e){return W(n,{url:t},e)}}function et(r,o){return function(t,e,n){return W(r,f.assign({url:t,params:e},o),n)}}function nt(r){return function(t,e,n){return W(r,{url:t,body:e},n)}}var rt=tt("HEAD"),ot=tt("DELETE"),it=et("GET",{jsonp:"callback"}),st=et("GET"),at=nt("POST"),ut=nt("PUT"),ct=nt("PATCH"),ft={doAll:function(t){var e=I.$Promise||Promise,n=I.$context;return M(I),e.all(t.map(function(t){return t instanceof e||t instanceof Promise?t:f.isObj(t)?I(f.assign({$context:n,$Promise:e},t)):t}),n)},ajax:I,fetch:K(tt("GET")),fetchGet:K(st),fetchPost:K(at),fetchPut:K(ut),fetchDelete:K(ot),fetchPatch:K(ct),fetchHead:K(rt),fetchJsonp:K(it),doGet:Y(st),doPost:Y(at),doPut:Y(ut),doDelete:Y(ot),doPatch:Y(ct),doHead:Y(rt),doJsonp:Y(it),getJSON:Z(st),postJSON:Z(at),putJSON:Z(ut),deleteJSON:Z(ot),patchJSON:Z(ct),headJSON:Z(rt),jsonp:Z(it)};return I.mixin=function(t){f.objectEach(t,function(e,t){I[t]=f.isFn(e)?function(){var t=e.apply(I.$context,arguments);return M(I),t}:e})},I.mixin(ft),I});