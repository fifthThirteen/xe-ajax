/**
 * xe-ajax.js v3.4.9-beta.0
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";var e="undefined",s=encodeURIComponent,n=typeof window===e&&typeof process!==e,t=typeof AbortController!==e&&typeof AbortSignal!==e,r=typeof console===e?"":console,o="";function a(t){return!!t&&t.constructor===Object}function u(t){return!!t&&t.constructor===Array}function i(t,e){for(var n=t.length-1;0<=n;n--)if(e===t[n])return n;return-1}function c(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function f(){return n?"":o.origin||o.protocol+"//"+o.host}n||(o=location);var l={IS_N:n,IS_F:!n&&!!self.fetch,IS_A:!(typeof Blob===e||typeof FormData===e||typeof FileReader===e),IS_FAC:t,IS_DEF:Object.defineProperty&&{}.__defineGetter__,isFData:function(t){return typeof FormData!==e&&t instanceof FormData},isCrossOrigin:function(t){return!n&&/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)&&(RegExp.$1!==o.protocol||RegExp.$2.split("/")[0]!==o.host)},isStr:function(t){return"string"==typeof t},isObj:function(t){return t&&"object"==typeof t},isPlainObject:a,isFn:function(t){return"function"==typeof t},err:function(t){var e=r.error?r.error:"";e&&e(t)},getOrigin:f,getBaseURL:function(){if(n)return"";var t=o.pathname,e=i(t,"/")+1;return f()+(e===t.length?t:t.substring(0,e))},objectEach:c,serialize:function(t){var n=[];return c(t,function(t,e){void 0!==t&&(a(t)||u(t)?n=n.concat(function n(t,r,o){var i=[];return c(t,function(t,e){a(t)||u(t)?i=i.concat(n(t,r+"["+e+"]",u(t))):i.push(s(r+"["+(o?"":e)+"]")+"="+s(null===t?"":t))}),i}(t,e,u(t))):n.push(s(e)+"="+s(null===t?"":t)))}),n.join("&").replace(/%20/g,"+")},assign:Object.assign||function(t){for(var e,n=arguments,r=1,o=n.length;r<o;r++)for(var i in e=n[r])e.hasOwnProperty(i)&&(t[i]=e[i]);return t},trim:function(t){return(""+t).replace(/(^\s*)|(\s*$)/g,"")},includes:function(t,e){return-1<i(t,e)},arrayEach:function(t,e,n){for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)},headersEach:function(t,e){t&&t.forEach&&t.forEach(e)},clearContext:function(t){t.$context=t.$Promise=null}},d={method:"GET",baseURL:l.getBaseURL(),mode:"cors",cache:"default",credentials:"same-origin",redirect:"follow",bodyType:"json-data",headers:{Accept:"application/json, text/plain, */*"},validateStatus:function(t){return 200<=t.status&&t.status<300}};function h(t){return(""+t).toLowerCase()}function p(t,e){var n,r,o;this.$index=0,this.$list=(n=t,r=e,o=[],l.objectEach(n,function(t,e){o.push([e,t,[e,t]][r])}),o),this.next=function(){return e=(t=this).$list[this.$index],{done:n=t.$index++>=t.$list.length,value:n?void 0:e};var t,e,n}}function y(t){var n=this;n._d={},l[t instanceof b?"headersEach":"objectEach"](t,function(t,e){n.set(e,t)})}var v=y.prototype;v.set=function(t,e){this._d[h(t)]=e},v.get=function(t){var e=h(t);return this.has(e)?this._d[e]:null},v.append=function(t,e){var n=h(t),r=this._d;this.has(n)?r[n]=r[n]+", "+e:r[n]=""+e},v.has=function(t){return this._d.hasOwnProperty(h(t))},v.keys=function(){return new p(this._d,0)},v.values=function(){return new p(this._d,1)},v.entries=function(){return new p(this._d,2)},v.delete=function(t){delete this._d[h(t)]},v.forEach=function(t,e){l.objectEach(this._d,t,e)};var b="undefined"==typeof Headers?y:Headers;function m(r,e,o){this.locked=!1,this._getBody=function(){var n=this,t=e.$Promise||Promise;return l.IS_DEF?o._response.bodyUsed=!0:o.bodyUsed=!0,new t(function(t,e){n.locked?e(new TypeError("body stream already read")):(n.locked=!0,t(r))},e.$context)}}function g(){this.onaborted=null,l.IS_DEF?this.D_AS={aborted:!1}:this.aborted=!1}l.IS_DEF&&Object.defineProperty(g.prototype,"aborted",{get:function(){return this.D_AS.aborted}});var _=[];function E(t){for(var e=0,n=_.length;e<n;e++)if(t===_[e][0])return e;return-1}function x(){this.signal=new g}g.prototype.install=function(t){var e=t.signal;if(e){var n=E(e);-1<n?_[n][1].push(t):_.push([e,[t]])}},x.prototype.abort=function(){var t=E(this.signal);if(-1<t){var n=_[t];l.arrayEach(n[1],function(t){var e=n[0];t.abort(),l.IS_DEF?e.D_AS.aborted=!0:e.aborted=!0}),_.splice(t,1)}};var w=l.IS_FAC?AbortController:x,S={resolves:[],rejects:[]},T={resolves:[],rejects:[]};function $(t,e){l.includes(t,e)||t.push(e)}function j(n){return function(t,e){$(n.resolves,t),$(n.rejects,e)}}function P(t,r,e){var o=r.$Promise||Promise,n=o.resolve(e,r.$context);return l.arrayEach(t,function(t){n=n.then(function(n){return new o(function(e){t(n,function(t){e(t&&t.body&&t.status?N.toResponse(t,r):n)},r)},r.$context)}).catch(l.err)}),n}var R={request:{use:j(S)},response:{use:j(T)}};R.request.use(function(t,e){var n=t.headers,r=t.body,o=t.method;r&&"GET"!==o&&"HEAD"!==o&&(l.isFData(r)||n.set("Content-Type","json-data"===t.bodyType?"application/json; charset=utf-8":"application/x-www-form-urlencoded")),l.isCrossOrigin(t.getUrl())&&n.set("X-Requested-With","XMLHttpRequest"),e()});var O={interceptors:R,requests:function(t){var r=t.$Promise||Promise,e=r.resolve(t,t.$context);return l.arrayEach(S.resolves,function(n){e=e.then(function(e){return new r(function(t){n(e,function(){t(e)})},t.$context)}).catch(l.err)}),e},toResolves:function(t,e,n,r){P(T.resolves,t,e).then(n)},toRejects:function(t,e,n,r){P(T.rejects,t,e).then(function(t){(N.isResponse(t)?n:r)(t)})}};function A(t){l.assign(this,{url:"",body:"",params:"",signal:""},t),this.headers=new b(t.headers),this.method=this.method.toLocaleUpperCase(),this.bodyType=this.bodyType.toLowerCase();var e=this.signal;e&&e.install&&e.install(this)}var F=A.prototype;function D(t,e,n){this._body=t,this._request=n;var r=e.status,o=this._response={body:new m(t,n,this),bodyUsed:!1,url:n.url,status:r,statusText:e.statusText,redirected:302===r,headers:new b(e.headers||{}),type:"basic"};l.IS_DEF?o.ok=n.validateStatus(this):(l.assign(this,o),this.ok=n.validateStatus(this))}F.abort=function(){var t=this.xhr;t&&t.abort(),this.$abort=!0},F.getUrl=function(){var t=this.url,e=this.params;if(t){var n=l.includes(["no-store","no-cache","reload"],this.cache)?{_t:Date.now()}:{},r=this.transformParams;return r&&(e=this.params=r(e||{},this)),(e=e&&!l.isFData(e)?l.isStr(e)?e:(this.paramsSerializer||l.serialize)(l.assign(n,e),this):l.serialize(n))&&(t+=(-1===t.indexOf("?")?"?":"&")+e),/\w+:\/{2}.*/.test(t)?t:0===t.indexOf("//")?(l.IS_N?"":location.protocol)+t:0===t.indexOf("/")?l.getOrigin()+t:this.baseURL.replace(/\/$/,"")+"/"+t}return t},F.getBody=function(){var t=null,e=this.body,n=this.method;if(e&&"GET"!==n&&"HEAD"!==n){var r=this.transformBody,o=this.stringifyBody;r&&(e=this.body=r(e,this)||e),t=o?o(e,this):l.isFData(e)||l.isStr(e)?e:"form-data"===this.bodyType?l.serialize(e):JSON.stringify(e)}return t};var C=decodeURIComponent,I=D.prototype;function q(t,n){return new(t.$Promise||Promise)(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}},t.$context)}function U(t){if(t){var e=t.constructor;return"undefined"!=typeof Response&&e===Response||e===D}return!1}function B(t){return l.isStr(t)?t:JSON.stringify(t)}l.IS_DEF&&l.arrayEach("body,bodyUsed,url,headers,status,statusText,ok,redirected,type".split(","),function(t){Object.defineProperty(I,t,{get:function(){return this._response[t]}})}),I.clone=function(){if(this.bodyUsed)throw new TypeError("Failed to execute 'clone' on 'Response': Response body is already used");return new D(this._body,this,this._request)},I.json=function(){return this.text().then(function(t){return JSON.parse(t)})},I.text=function(){return this.body._getBody(this)},l.IS_A&&(I.text=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=q(r,e);return e.readAsText(t),n})},I.blob=function(){return this.body._getBody(this)},I.arrayBuffer=function(){var r=this._request;return this.blob().then(function(t){var e=new FileReader,n=q(r,e);return e.readAsArrayBuffer(t),n})},I.formData=function(){return this.text().then(function(t){var o=new FormData;return l.arrayEach(l.trim(t).split("&"),function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");o.append(C(n),C(r))}}),o})});var N={isResponse:U,toResponse:function(t,e){if(U(t))return t;var n=t.body,r={status:t.status,statusText:t.statusText,headers:t.headers};return new D(n=l.IS_A?n instanceof Blob?n:new Blob([B(n)]):B(n),r,e)}};function H(r,o,t){var e=r.getUrl(),n=r.timeout,i=r.credentials;if("same-origin"===r.mode&&l.isCrossOrigin(e))throw t(),new TypeError("Fetch API cannot load "+e+'. Request mode is "same-origin" but the URL\'s origin is not same as the request origin '+l.getOrigin()+".");var s=r.$XMLHttpRequest||XMLHttpRequest,a=r.xhr=new s,u=r.progress,c=function(){var t,n,e;o(new D(a[l.IS_A?"response":"responseText"],{status:a.status,statusText:a.statusText,headers:(t=a,n={},e=l.trim(t.getAllResponseHeaders()),l.arrayEach(e.split("\n"),function(t){var e=t.indexOf(":");n[l.trim(t.slice(0,e))]=l.trim(t.slice(e+1))}),n)},r))};if(a._request=r,void 0===a.onload?a.onreadystatechange=function(){4===a.readyState&&c()}:a.onload=c,a.onerror=function(){t()},a.ontimeout=function(){t("E_T")},a.onabort=function(){t("E_A")},u){var f=u.onupload,d=u.onload,h=a.upload;f&&h&&k(h,f,u),d&&k(a,d,u)}a.open(r.method,e,!0),l.headersEach(r.headers,function(t,e){a.setRequestHeader(e,t)}),l.IS_A&&(a.responseType="blob"),"include"===i?a.withCredentials=!0:"omit"===i&&(a.withCredentials=!1),n&&setTimeout(function(){a.abort()},n),a.send(r.getBody()),r.$abort&&a.abort()}function k(t,s,a){var e=function(){a.time=(new Date).getTime()};t.onloadstart=e,t.onprogress=function(t){var e=a.time,n=(new Date).getTime(),r=a.loaded,o=t.total,i=t.loaded;t.lengthComputable&&(a.value=Math.round(i/o*100)),a.total=o,a.loaded=i,a.time=n,a.speed=(i-r)/(n-e)*1e3,s(t)},t.onloadend=e}function J(e,n,r){var o="",t=e.$fetch||self.fetch,i=e.timeout,s={_request:e,body:e.getBody()},a=e.signal,u=clearTimeout;l.arrayEach("method,headers,signal,mode,cache,credentials,redirect,referrer,referrerPolicy,keepalive,integrity".split(","),function(t){e[t]&&(s[t]=e[t])}),i&&(o=setTimeout(function(){r("E_T")},i)),a&&a.aborted?r("E_A"):t(e.getUrl(),s).then(function(t){u(o),n(N.toResponse(t,e))}).catch(function(t){u(o),r()})}var L=l.IS_N?sendHttp:l.IS_F?function(t){return function(t){var e=t.signal;if(!t.progress){if(t.$fetch)return e?H:J;if(l.IS_F)return l.IS_FAC?J:e?H:J}return H}(t).apply(this,arguments)}:H,G=0,z="undefined"==typeof window?"":window,X=z?z.document:"";function M(t,e){var n=t.script,r=X.body;n.parentNode===r&&r.removeChild(n);try{delete z[e]}catch(t){z[e]=void 0}}var W={E_A:"The user aborted a request.",E_T:"Request timeout.",E_F:"Network request failed."};function K(t){var r=new A(l.assign({},d,{headers:l.assign({},d.headers)},t));return new(r.$Promise||Promise)(function(e,n){return O.requests(r).then(function(){(r.jsonp?function(e,n,t){var r=e.timeout,o=e.jsonpCallback,i=e.script=X.createElement("script");if(o||(o=e.jsonpCallback="jsonp_xe_"+Date.now()+"_"+ ++G),l.isFn(e.$jsonp))return e.$jsonp(i,e).then(function(t){n(N.toResponse({status:200,body:t},e))}).catch(function(){t()});var s=e.getUrl();z[o]=function(t){M(e,o),n({status:200,body:t})},i.type="text/javascript",i.src=s+(-1===s.indexOf("?")?"?":"&")+e.jsonp+"="+o,i.onerror=function(){M(e,o),n()},r&&setTimeout(function(){M(e,o),n("E_T")},r),X.body.appendChild(i)}:L)(r,function(t){O.toResolves(r,N.toResponse(t,r),e,n)},function(t){O.toRejects(r,new TypeError(W[t||"E_F"]),e,n)})})},r.$context)}K.version="3.4.9-beta.0",K.interceptors=O.interceptors,K.serialize=l.serialize,K.Progress=function(){this.time=0,this.speed=0,this.loaded=0,this.value=0,this.total=0,this.onupload=this.onload=null},K.AbortController=w,K.use=function(t){t.install(K)},K.setup=function(t){l.assign(d,t)};var Q=l.clearContext;function V(t,e,n){var r=l.assign({method:t,$context:K.$context,$Promise:K.$Promise},e,n);return Q(K),r}function Y(t){return function(){return K(t.apply(this,arguments))}}function Z(t,e,n,r,o){return t?{data:e,status:n,statusText:r,headers:o}:e}function tt(n,i){return function(){var t=n.apply(this,arguments),e=t.$Promise||Promise;return K(t).catch(function(t){return e.reject(Z(i,"","failed",t.message||t,{}),this)}).then(function(o){return new e(function(t,e){var r=o.ok?t:e;o.text().then(function(e){try{return JSON.parse(e)}catch(t){return e}}).catch(function(t){return""}).then(function(t){var e,n;r(Z(i,t,o.status,o.statusText,(e=o,n={},l.headersEach(e.headers,function(t,e){n[e]=t}),n)))})},this)})}}function et(t){return tt(t,!0)}function nt(t){return tt(t)}function rt(n){return function(t,e){return V(n,{url:t},e)}}function ot(r,o){return function(t,e,n){return V(r,l.assign({url:t,params:e},o),n)}}function it(r){return function(t,e,n){return V(r,{url:t,body:e},n)}}var st=rt("HEAD"),at=rt("DELETE"),ut=ot("GET",{jsonp:"callback"}),ct=ot("GET"),ft=it("POST"),dt=it("PUT"),ht=it("PATCH"),lt={doAll:function(t){var e=K.$Promise||Promise,n=K.$context;return Q(K),e.all(t.map(function(t){return t instanceof e||t instanceof Promise?t:l.isObj(t)?K(l.assign({$context:n,$Promise:e},t)):t}),n)},ajax:K,fetch:Y(rt("GET")),fetchGet:Y(ct),fetchPost:Y(ft),fetchPut:Y(dt),fetchDelete:Y(at),fetchPatch:Y(ht),fetchHead:Y(st),fetchJsonp:Y(ut),doGet:et(ct),doPost:et(ft),doPut:et(dt),doDelete:et(at),doPatch:et(ht),doHead:et(st),doJsonp:et(ut),getJSON:nt(ct),postJSON:nt(ft),putJSON:nt(dt),deleteJSON:nt(at),patchJSON:nt(ht),headJSON:nt(st),jsonp:nt(ut)};return K.mixin=function(t){l.objectEach(t,function(e,t){K[t]=l.isFn(e)?function(){var t=e.apply(K.$context,arguments);return Q(K),t}:e})},K.mixin(lt),K});