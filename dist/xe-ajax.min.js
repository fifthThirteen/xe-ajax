/**
 * xe-ajax.js v3.4.1
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";function t(e,n,o){var r=[];return A.objectEach(e,function(e,s){A.isPlainObject(e)||A.isArray(e)?r=r.concat(t(e,n+"["+s+"]",A.isArray(e))):r.push(encodeURIComponent(n+"["+(o?"":s)+"]")+"="+encodeURIComponent(e))}),r}function e(t){return String(t).toLowerCase()}function n(t,e){this.$index=0,this.$list=function(t,e){var n=[];for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];n.push([o,r,[o,r]][e])}return n}(t,e),this.next=function(){return function(t,e){var n=t.$index++>=t.$list.length;return{done:n,value:n?void 0:e}}(this,this.$list[this.$index])}}function o(t){this._map={},t instanceof T?t.forEach(function(t,e){this.set(e,t)},this):A.objectEach(t,function(t,e){this.set(e,t)},this)}function r(){this.onaborted=null,this._abortSignal={aborted:!1}}function s(t){for(var e=0,n=$.length;e<n;e++)if(t===$[e][0])return e}function i(){this.signal=new r}function a(t){return function(e,n){-1===t.resolves.indexOf(e)&&t.resolves.push(e),-1===t.rejects.indexOf(n)&&t.rejects.push(n)}}function c(t,e,n){var o=e.$Promise||Promise,r=o.resolve(n,e.$context);return A.arrayEach(t,function(t){r=r.then(function(n){return new o(function(o){t(n,function(t){t&&t.body&&t.status?o(C.toResponse(t,e)):o(n)},e)},e.$context)}).catch(function(t){console.error(t)})}),r}function u(t){A.objectAssign(this,{url:"",body:null,params:null,signal:null},t),this.headers=new T(t.headers),this.method=String(this.method).toLocaleUpperCase(),this.bodyType=String(this.bodyType).toLowerCase(),this.signal&&A.isFunction(this.signal.install)&&this.signal.install(this)}function f(t,e,n){this._body=t,this._request=n,this._response={body:new function(t,e,n){this.locked=!1,this._getBody=function(){var o=this,r=e.$Promise||Promise;return n._response.bodyUsed=!0,new r(function(e,n){o.locked?n(new TypeError("body stream already read")):(o.locked=!0,e(t))},e.$context)}}(t,n,this),bodyUsed:!1,url:n.url,status:e.status,statusText:e.statusText,redirected:302===e.status,headers:new T(e.headers||{}),type:"basic"},this._response.ok=n.validateStatus(this)}function d(t,e){return new(t.$Promise||Promise)(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}},t.$context)}function p(t,e,n){var o=null,r=A.isFunction(t.$fetch)?t.$fetch:self.fetch,s={_request:t,method:t.method,cache:t.cache,credentials:t.credentials,body:t.getBody(),headers:t.headers};t.timeout&&(o=setTimeout(function(){S.responseRejectInterceptor(t,new TypeError("Request timeout."),e,n)},t.timeout)),t.signal&&t.signal.aborted?S.responseRejectInterceptor(t,new TypeError("The user aborted a request."),e,n):r(t.getUrl(),s).then(function(r){clearTimeout(o),S.responseResolveInterceptor(t,C.toResponse(r,t),e,n)}).catch(function(r){clearTimeout(o),S.responseRejectInterceptor(t,r,e,n)})}function h(t){t.script.parentNode===document.body&&document.body.removeChild(t.script);try{delete U[t.jsonpCallback]}catch(e){U[t.jsonpCallback]=void 0}}function l(t,e,n){h(t),S.responseRejectInterceptor(t,new TypeError("JSONP request failed"),e,n)}function y(t){var e=A.objectAssign({},E,{headers:A.objectAssign({},E.headers)},t);return new(e.$Promise||Promise)(function(t,n){(e.jsonp?k.sendJSONP:F.fetchRequest)(new u(e),t,n)},e.$context)}function b(t,e,n){var o=A.objectAssign({method:t,$context:y.$context,$Promise:y.$Promise},e,n);return A.clearXEAjaxContext(y),o}function m(t){return function(){return y(t.apply(this,arguments))}}function g(t,e){return function(){var n=t.apply(this,arguments),o=n.$Promise||Promise;return y(n).catch(function(t){return o.reject(e?{data:null,ok:!1,status:"failed",statusText:t.message||t,headers:{}}:null,this)}).then(function(t){return new o(function(n,o){var r=t.ok?n:o;t.clone().json().catch(function(e){return t.clone().text()}).then(function(n){r(e?{data:n,ok:t.ok,status:t.status,statusText:t.statusText,headers:function(t){var e={};return t.headers.forEach(function(t,n){e[n]=t}),e}(t)}:n)})},this)})}}function v(t){return g(t,!0)}function j(t){return g(t)}function x(t){return function(e,n){return b(t,{url:e},n)}}function R(t,e){return function(n,o,r){return b(t,A.objectAssign({url:n,params:o},e),r)}}function w(t){return function(e,n,o){return b(t,{url:e,body:n},o)}}var A={isArray:Array.isArray||function(t){return!!t&&t.constructor===Array},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isCrossOrigin:function(t){return!("undefined"==typeof location||!/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)||RegExp.$1===location.protocol&&RegExp.$2.split("/")[0]===location.host)},isSupportAdvanced:function(){return"function"==typeof Blob&&"function"==typeof FormData&&"function"==typeof FileReader},isString:function(t){return"string"==typeof t},isObject:function(t){return t&&"object"==typeof t},isPlainObject:function(t){return!!t&&t.constructor===Object},isFunction:function(t){return"function"==typeof t},getLocatOrigin:function(){return"undefined"==typeof location?"":location.origin||location.protocol+"//"+location.host},getBaseURL:function(){if("undefined"==typeof location)return"";var t=location.pathname,e=A.lastIndexOf(t,"/")+1;return A.getLocatOrigin()+(e===t.length?t:t.substring(0,e))},lastIndexOf:function(t,e){if(A.isFunction(t.lastIndexOf))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;n--)if(e===t[n])return n;return-1},objectEach:function(t,e,n){for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)},serialize:function(e){var n=[];return A.objectEach(e,function(e,o){void 0!==e&&(A.isPlainObject(e)||A.isArray(e)?n=n.concat(t(e,o,A.isArray(e))):n.push(encodeURIComponent(o)+"="+encodeURIComponent(e)))}),n.join("&").replace(/%20/g,"+")},objectAssign:Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}return t},arrayEach:function(t,e,n){if(t.forEach)t.forEach(e,n);else for(var o=0,r=t.length||0;o<r;o++)e.call(n,t[o],o,t)},arrayIncludes:function(t,e){if(t.includes)return t.includes(e);for(var n=0,o=t.length||0;n<o;n++)if(t[n]===e)return!0;return!1},clearXEAjaxContext:function(t){t.$context=t.$Promise=null}},E={method:"GET",baseURL:A.getBaseURL(),cache:"default",credentials:"same-origin",bodyType:"json-data",log:!1,headers:{Accept:"application/json, text/plain, */*"},validateStatus:function(t){return t.status>=200&&t.status<300}};A.objectAssign(o.prototype,{set:function(t,n){this._map[e(t)]=n},get:function(t){var n=e(t);return this.has(n)?this._map[n]:null},append:function(t,n){var o=e(t);this.has(o)?this._map[o]=this._map[o]+", "+n:this._map[o]=""+n},has:function(t){return this._map.hasOwnProperty(e(t))},keys:function(){return new n(this._map,0)},values:function(){return new n(this._map,1)},entries:function(){return new n(this._map,2)},delete:function(t){delete this._map[e(t)]},forEach:function(t,e){A.objectEach(this._map,function(n,o,r){t.call(e,n,o,this)},this)}});var T="function"==typeof Headers?Headers:o;Object.defineProperty(r.prototype,"aborted",{get:function(){return this._abortSignal.aborted}});var $=[];A.objectAssign(r.prototype,{install:function(t){if(t.signal){var e=s(t.signal);void 0===e?$.push([t.signal,[t]]):$[e][1].push(t)}}}),A.objectAssign(i.prototype,{abort:function(){var t=s(this.signal);void 0!==t&&(A.arrayEach($[t][1],function(e){e.abort(),$[t][0]._abortSignal.aborted=!0}),$.splice(t,1))}});var O="function"==typeof AbortController?AbortController:i,P={reqQueue:{resolves:[],rejects:[]},respQueue:{resolves:[],rejects:[]}},_={request:{use:a(P.reqQueue)},response:{use:a(P.respQueue)}};_.request.use(function(t,e){t.body&&"GET"!==t.method&&"HEAD"!==t.method&&(A.isFormData(t.body)||(t.headers.set("Content-Type","application/x-www-form-urlencoded"),"json-data"!==t.bodyType&&"json_data"!==t.bodyType||t.headers.set("Content-Type","application/json; charset=utf-8"))),A.isCrossOrigin(t.getUrl())&&t.headers.set("X-Requested-With","XMLHttpRequest"),e()});var S={interceptors:_,requestInterceptor:function(t){var e=t.$Promise||Promise,n=e.resolve(t,t.$context);return A.arrayEach(P.reqQueue.resolves,function(o){n=n.then(function(n){return new e(function(t){o(n,function(){t(n)})},t.$context)}).catch(function(t){console.error(t)})}),n},responseResolveInterceptor:function(t,e,n,o){c(P.respQueue.resolves,t,e).then(n)},responseRejectInterceptor:function(t,e,n,o){c(P.respQueue.rejects,t,e).then(function(t){(C.isResponse(t)?n:o)(t)})}};A.objectAssign(u.prototype,{abort:function(){this.xhr&&this.xhr.abort(),this.$abort=!0},getUrl:function(){var t=this.url,e="";if(t){var n=A.arrayIncludes(["no-store","no-cache","reload"],this.cache)?{_t:Date.now()}:{};return A.isFunction(this.transformParams)&&(this.params=this.transformParams(this.params||{},this)),(e=this.params&&!A.isFormData(this.params)?A.isString(this.params)?this.params:(A.isFunction(this.paramsSerializer)?this.paramsSerializer:A.serialize)(A.objectAssign(n,this.params),this):A.serialize(n))&&(t+=(-1===t.indexOf("?")?"?":"&")+e),/\w+:\/{2}.*/.test(t)?t:0===t.indexOf("/")?A.getLocatOrigin()+t:this.baseURL.replace(/\/$/,"")+"/"+t}return t},getBody:function(){var t=null,e=this.body;if(e&&"GET"!==this.method&&"HEAD"!==this.method)try{A.isFunction(this.transformBody)&&(e=this.body=this.transformBody(e,this)||e),t=A.isFunction(this.stringifyBody)?this.stringifyBody(e,this)||null:A.isFormData(e)?e:A.isString(e)?e:"form-data"===this.bodyType||"form_data"===this.bodyType?A.serialize(e):JSON.stringify(e)}catch(t){console.error(t)}return t}}),A.arrayEach(["body","bodyUsed","url","headers","status","statusText","ok","redirected","type"],function(t){Object.defineProperty(f.prototype,t,{get:function(){return this._response[t]}})}),A.objectAssign(f.prototype,{clone:function(){if(this.bodyUsed)throw new TypeError("Failed to execute 'clone' on 'Response': Response body is already used");return new f(this._body,{status:this.status,statusText:this.statusText,headers:this.headers},this._request)},json:function(){return this.text().then(function(t){return JSON.parse(t)})},text:function(){return this.body._getBody(this)}}),A.isSupportAdvanced()&&A.objectAssign(f.prototype,{text:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=d(t,n);return n.readAsText(e),o})},blob:function(){return this.body._getBody(this)},arrayBuffer:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=d(t,n);return n.readAsArrayBuffer(e),o})},formData:function(){return this.text().then(function(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(r))}}),e})}});var C={isResponse:function(t){return!!t&&("function"==typeof Response&&t.constructor===Response||t.constructor===f)},toResponse:function(t,e){if(C.isResponse(t))return t;var n={status:t.status,statusText:t.statusText,headers:t.headers};return A.isSupportAdvanced()?new f(t.body instanceof Blob?t.body:new Blob([A.isString(t.body)?t.body:JSON.stringify(t.body)]),n,e):new f(A.isString(t.body)?t.body:JSON.stringify(t.body),n,e)}},q={sendXHR:function(t,e,n){var o=A.isFunction(t.$XMLHttpRequest)?t.$XMLHttpRequest:XMLHttpRequest,r=t.xhr=new o;r._request=t,r.open(t.method,t.getUrl(),!0),t.timeout&&setTimeout(function(){r.abort()},t.timeout),t.headers.forEach(function(t,e){r.setRequestHeader(e,t)}),r.onload=function(){S.responseResolveInterceptor(t,new f(r.response,{status:r.status,statusText:r.statusText,headers:function(t){var e={};if(t.getAllResponseHeaders){var n=t.getAllResponseHeaders().trim();n&&A.arrayEach(n.split("\n"),function(t){var n=t.indexOf(":");e[t.slice(0,n).trim()]=t.slice(n+1).trim()})}return e}(r)},t),e,n)},r.onerror=function(){S.responseRejectInterceptor(t,new TypeError("Network request failed"),e,n)},r.ontimeout=function(){S.responseRejectInterceptor(t,new TypeError("Request timeout."),e,n)},r.onabort=function(){S.responseRejectInterceptor(t,new TypeError("The user aborted a request."),e,n)},A.isSupportAdvanced()&&(r.responseType="blob"),"include"===t.credentials?r.withCredentials=!0:"omit"===t.credentials&&(r.withCredentials=!1),r.send(t.getBody()),t.$abort&&r.abort()}},I="undefined"==typeof XMLHttpRequest&&"undefined"!=typeof process?httpExports.sendHttp:"undefined"!=typeof self&&self.fetch?function(t,e,n){return function(t){return t.$fetch?t.signal?q.sendXHR:p:"undefined"!=typeof self&&self.fetch?"function"==typeof AbortController&&"function"==typeof AbortSignal?p:t.signal?q.sendXHR:p:q.sendXHR}(t).apply(this,arguments)}:q.sendXHR,F={fetchRequest:function(t,e,n){return S.requestInterceptor(t).then(function(){return I(t,e,n)})}},H=0,U="undefined"==typeof window?this:window,k={sendJSONP:function(t,e,n){t.script=document.createElement("script"),S.requestInterceptor(t).then(function(){var o=t.script;if(t.jsonpCallback||(t.jsonpCallback="jsonp_xeajax_"+Date.now()+"_"+ ++H),A.isFunction(t.$jsonp))return t.$jsonp(o,t).then(function(o){S.responseResolveInterceptor(t,C.toResponse({status:200,body:o},t),e,n)}).catch(function(o){S.responseRejectInterceptor(t,o,e,n)});var r=t.getUrl();U[t.jsonpCallback]=function(n){!function(t,e,n,o){h(t),S.responseResolveInterceptor(t,C.toResponse(e,t),n,o)}(t,{status:200,body:n},e)},o.type="text/javascript",o.src=r+(-1===r.indexOf("?")?"?":"&")+t.jsonp+"="+t.jsonpCallback,o.onerror=function(o){l(t,e,n)},t.timeout&&setTimeout(function(){l(t,e,n)},t.timeout),document.body.appendChild(o)})}};y.version="3.4.1",y.use=function(t){t.install(y)},y.setup=function(t){A.objectAssign(E,t)};var B=x("HEAD"),D=x("DELETE"),L=R("GET",{jsonp:"callback"}),X=R("GET"),J=w("POST"),N=w("PUT"),z=w("PATCH"),G=m(B),Q=m(D),M=m(L),W=m(X),K=m(J),V=m(N),Y=m(z),Z={doAll:function(t){var e=y.$Promise||Promise,n=y.$context;return A.clearXEAjaxContext(y),e.all(t.map(function(t){return t instanceof e||t instanceof Promise?t:A.isObject(t)?y(A.objectAssign({$context:n,$Promise:e},t)):t}),n)},ajax:y,fetch:function(t,e){return W(t,null,e)},fetchGet:W,fetchPost:K,fetchPut:V,fetchDelete:Q,fetchPatch:Y,fetchHead:G,fetchJsonp:M,doGet:v(X),doPost:v(J),doPut:v(N),doDelete:v(D),doPatch:v(z),doHead:v(B),doJsonp:v(L),getJSON:j(X),postJSON:j(J),putJSON:j(N),deleteJSON:j(D),patchJSON:j(z),headJSON:j(B),jsonp:j(L)};return y.mixin=function(t){A.objectEach(t,function(t,e){y[e]=A.isFunction(t)?function(){var e=t.apply(y.$context,arguments);return A.clearXEAjaxContext(y),e}:t})},A.objectAssign(y,{serialize:A.serialize,interceptors:S.interceptors,AbortController:O}),y.mixin(Z),y});