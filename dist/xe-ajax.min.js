/**
 * xe-ajax.js v3.4.4
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";function t(t){return!!t&&t.constructor===Object}function e(t){return!!t&&t.constructor===Array}function n(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function r(o,i,s){var a=[];return n(o,function(n,o){t(n)||e(n)?a=a.concat(r(n,i+"["+o+"]",e(n))):a.push(S(i+"["+(s?"":o)+"]")+"="+S(null===n?"":n))}),a}function o(){return C?"":F.origin||F.protocol+"//"+F.host}function i(t){return(""+t).toLowerCase()}function s(t,e){this.$index=0,this.$list=function(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];n.push([r,o,[r,o]][e])}return n}(t,e),this.next=function(){return function(t,e){var n=t.$index++>=t.$list.length;return{done:n,value:n?void 0:e}}(this,this.$list[this.$index])}}function a(t){var e=this,n=function(t,n){e.set(n,t)};e._d={},t instanceof D?t.forEach(n):q.objectEach(t,n)}function u(){this.onaborted=null,this._abortSignal={aborted:!1}}function c(t){for(var e=0,n=L.length;e<n;e++)if(t===L[e][0])return e}function f(){this.signal=new u}function d(t,e){-1===q.arrayIndexOf(t,e)&&t.push(e)}function h(t){return function(e,n){d(t.resolves,e),d(t.rejects,n)}}function l(t,e,n){var r=e.$Promise||Promise,o=r.resolve(n,e.$context);return q.arrayEach(t,function(t){o=o.then(function(n){return new r(function(r){t(n,function(t){r(t&&t.body&&t.status?M.toResponse(t,e):n)},e)},e.$context)}).catch(function(t){console.error(t)})}),o}function p(t){q.objectAssign(this,{url:"",body:"",params:"",signal:""},t),this.headers=new D(t.headers),this.method=this.method.toLocaleUpperCase(),this.bodyType=this.bodyType.toLowerCase(),this.signal&&q.isFunction(this.signal.install)&&this.signal.install(this)}function y(t,e,n){this._body=t,this._request=n;(this._response={body:new function(t,e,n){this.locked=!1,this._getBody=function(){var r=this,o=e.$Promise||Promise;return n._response.bodyUsed=!0,new o(function(e,n){r.locked?n(new TypeError("body stream already read")):(r.locked=!0,e(t))},e.$context)}}(t,n,this),bodyUsed:!1,url:n.url,status:e.status,statusText:e.statusText,redirected:302===e.status,headers:new D(e.headers||{}),type:"basic"}).ok=n.validateStatus(this)}function m(t,e){return new(t.$Promise||Promise)(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}},t.$context)}function b(t){if(t){var e=t.constructor;return"undefined"!=typeof Response&&e===Response||e===y}return!1}function g(t,e,n){var r=t.getUrl(),o=t.timeout,i=t.credentials;if("same-origin"===t.mode&&q.isCrossOrigin(r))throw n(),new TypeError("Fetch API cannot load "+r+'. Request mode is "same-origin" but the URL\'s origin is not same as the request origin '+q.getLocatOrigin()+".");var s=t.$XMLHttpRequest||XMLHttpRequest,a=t.xhr=new s;a._request=t,a.open(t.method,r,!0),o&&setTimeout(function(){a.abort()},o),t.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.onload=function(){e(new y(a.response,{status:a.status,statusText:a.statusText,headers:function(t){var e={},n=t.getAllResponseHeaders().trim();return q.arrayEach(n.split("\n"),function(t){var n=t.indexOf(":");e[t.slice(0,n).trim()]=t.slice(n+1).trim()}),e}(a)},t))},a.onerror=function(){n()},a.ontimeout=function(){n("timeout")},a.onabort=function(){n("aborted")},q._A&&(a.responseType="blob"),"include"===i?a.withCredentials=!0:"omit"===i&&(a.withCredentials=!1),a.send(t.getBody()),t.$abort&&a.abort()}function v(t,e,n){var r="",o=t.$fetch||self.fetch,i=t.timeout,s={_request:t,method:t.method,mode:t.mode,cache:t.cache,credentials:t.credentials,redirect:t.redirect,body:t.getBody(),headers:t.headers};i&&(r=setTimeout(function(){n("timeout")},i)),t.signal&&t.signal.aborted?n("aborted"):o(t.getUrl(),s).then(function(n){clearTimeout(r),e(M.toResponse(n,t))}).catch(function(t){clearTimeout(r),n()})}function x(t,e){t.script.parentNode===V.body&&V.body.removeChild(t.script);try{delete Q[e]}catch(t){Q[e]=void 0}}function w(t){var e=new p(q.objectAssign({},U,{headers:q.objectAssign({},U.headers)},t));return new(e.$Promise||Promise)(function(t,n){return G.requests(e).then(function(){(e.jsonp?function(t,e,n){t.script=V.createElement("script");var r=t.timeout,o=t.jsonpCallback,i=t.script;if(o||(o=t.jsonpCallback="jsonp_xe_"+Date.now()+"_"+ ++K),q.isFunction(t.$jsonp))return t.$jsonp(i,t).then(function(n){e(M.toResponse({status:200,body:n},t))}).catch(function(){n()});var s=t.getUrl();Q[o]=function(n){x(t,o),e({status:200,body:n})},i.type="text/javascript",i.src=s+(-1===s.indexOf("?")?"?":"&")+t.jsonp+"="+o,i.onerror=function(){x(t,o),e()},r&&setTimeout(function(){x(t,o),e("timeout")},r),V.body.appendChild(i)}:W)(e,function(r){G.responseResolves(e,M.toResponse(r,e),t,n)},function(r){G.responseRejects(e,new TypeError(Y[r||"failed"]),t,n)})})},e.$context)}function j(t,e,n){var r=q.objectAssign({method:t,$context:w.$context,$Promise:w.$Promise},e,n);return Z(w),r}function _(t){return function(){return w(t.apply(this,arguments))}}function $(t,e,n,r,o){return t?{data:e,status:n,statusText:r,headers:o}:e}function P(t,e){return function(){var n=t.apply(this,arguments),r=n.$Promise||Promise;return w(n).catch(function(t){return r.reject($(e,"","failed",t.message||t,{}),this)}).then(function(t){return new r(function(n,r){var o=t.ok?n:r;t.clone().json().catch(function(e){return t.clone().text()}).then(function(n){o($(e,n,t.status,t.statusText,function(t){var e={};return t.headers.forEach(function(t,n){e[n]=t}),e}(t)))})},this)})}}function T(t){return P(t,!0)}function O(t){return P(t)}function E(t){return function(e,n){return j(t,{url:e},n)}}function R(t,e){return function(n,r,o){return j(t,q.objectAssign({url:n,params:r},e),o)}}function A(t){return function(e,n,r){return j(t,{url:e,body:n},r)}}var S=encodeURIComponent,C="undefined"==typeof window&&"undefined"!=typeof process,F="";C||(F=location);var q={_N:C,_F:!C&&!!self.fetch,_A:!("undefined"==typeof Blob||"undefined"==typeof FormData||"undefined"==typeof FileReader),isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isCrossOrigin:function(t){return!C&&/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)&&(RegExp.$1!==F.protocol||RegExp.$2.split("/")[0]!==F.host)},isString:function(t){return"string"==typeof t},isObject:function(t){return t&&"object"==typeof t},isPlainObject:t,isFunction:function(t){return"function"==typeof t},getLocatOrigin:o,getBaseURL:function(){if(C)return"";var t=F.pathname,e=function(t,e){for(var n=t.length-1;n>=0;n--)if(e===t[n])return n;return-1}(t,"/")+1;return o()+(e===t.length?t:t.substring(0,e))},objectEach:n,serialize:function(o){var i=[];return n(o,function(n,o){void 0!==n&&(t(n)||e(n)?i=i.concat(r(n,o,e(n))):i.push(S(o)+"="+S(null===n?"":n)))}),i.join("&").replace(/%20/g,"+")},objectAssign:Object.assign||function(t){for(var e,n=arguments,r=1,o=n.length;r<o;r++){e=n[r];for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}return t},arrayIndexOf:function(t,e){for(var n=0,r=t.length;n<r;n++)if(e===t[n])return n;return-1},arrayEach:function(t,e,n){for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)},clearContext:function(t){t.$context=t.$Promise=null}},U={method:"GET",baseURL:q.getBaseURL(),mode:"cors",cache:"default",credentials:"same-origin",redirect:"follow",bodyType:"json-data",headers:{Accept:"application/json, text/plain, */*"},validateStatus:function(t){return t.status>=200&&t.status<300}},B=a.prototype;B.set=function(t,e){this._d[i(t)]=e},B.get=function(t){var e=i(t);return this.has(e)?this._d[e]:null},B.append=function(t,e){var n=i(t);this.has(n)?this._d[n]=this._d[n]+", "+e:this._d[n]=""+e},B.has=function(t){return this._d.hasOwnProperty(i(t))},B.keys=function(){return new s(this._d,0)},B.values=function(){return new s(this._d,1)},B.entries=function(){return new s(this._d,2)},B.delete=function(t){delete this._d[i(t)]},B.forEach=function(t,e){q.objectEach(this._d,t,e)};var D="undefined"==typeof Headers?a:Headers;Object.defineProperty(u.prototype,"aborted",{get:function(){return this._abortSignal.aborted}});var L=[];u.prototype.install=function(t){var e=t.signal;if(e){var n=c(e);void 0===n?L.push([e,[t]]):L[n][1].push(t)}},f.prototype.abort=function(){var t=c(this.signal);void 0!==t&&(q.arrayEach(L[t][1],function(e){e.abort(),L[t][0]._abortSignal.aborted=!0}),L.splice(t,1))};var N="undefined"==typeof AbortController?f:AbortController,H={resolves:[],rejects:[]},J={resolves:[],rejects:[]},k={request:{use:h(H)},response:{use:h(J)}};k.request.use(function(t,e){var n=t.headers,r=t.body;r&&"GET"!==t.method&&"HEAD"!==t.method&&(q.isFormData(r)||n.set("Content-Type","json-data"===t.bodyType?"application/json; charset=utf-8":"application/x-www-form-urlencoded")),q.isCrossOrigin(t.getUrl())&&n.set("X-Requested-With","XMLHttpRequest"),e()});var G={interceptors:k,requests:function(t){var e=t.$Promise||Promise,n=e.resolve(t,t.$context);return q.arrayEach(H.resolves,function(r){n=n.then(function(n){return new e(function(t){r(n,function(){t(n)})},t.$context)}).catch(function(t){console.error(t)})}),n},responseResolves:function(t,e,n,r){l(J.resolves,t,e).then(n)},responseRejects:function(t,e,n,r){l(J.rejects,t,e).then(function(t){(M.isResponse(t)?n:r)(t)})}},z=p.prototype;z.abort=function(){this.xhr&&this.xhr.abort(),this.$abort=!0},z.getUrl=function(){var t=this.url,e="";if(t){var n=-1===q.arrayIndexOf(["no-store","no-cache","reload"],this.cache)?{}:{_t:Date.now()};return q.isFunction(this.transformParams)&&(this.params=this.transformParams(this.params||{},this)),(e=this.params&&!q.isFormData(this.params)?q.isString(this.params)?this.params:(this.paramsSerializer||q.serialize)(q.objectAssign(n,this.params),this):q.serialize(n))&&(t+=(-1===t.indexOf("?")?"?":"&")+e),/\w+:\/{2}.*/.test(t)?t:0===t.indexOf("//")?(q._N?"":location.protocol)+t:0===t.indexOf("/")?q.getLocatOrigin()+t:this.baseURL.replace(/\/$/,"")+"/"+t}return t},z.getBody=function(){var t=null,e=this.body;return e&&"GET"!==this.method&&"HEAD"!==this.method&&(this.transformBody&&(e=this.body=this.transformBody(e,this)||e),t=this.stringifyBody?this.stringifyBody(e,this):q.isFormData(e)||q.isString(e)?e:"form-data"===this.bodyType?q.serialize(e):JSON.stringify(e)),t};var I=decodeURIComponent,X=y.prototype;q.arrayEach(["body","bodyUsed","url","headers","status","statusText","ok","redirected","type"],function(t){Object.defineProperty(X,t,{get:function(){return this._response[t]}})}),X.clone=function(){if(this.bodyUsed)throw new TypeError("Failed to execute 'clone' on 'Response': Response body is already used");return new y(this._body,this,this._request)},X.json=function(){return this.text().then(function(t){return JSON.parse(t)})},X.text=function(){return this.body._getBody(this)},q._A&&(X.text=function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,r=m(t,n);return n.readAsText(e),r})},X.blob=function(){return this.body._getBody(this)},X.arrayBuffer=function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,r=m(t,n);return n.readAsArrayBuffer(e),r})},X.formData=function(){return this.text().then(function(t){var e=new FormData;return q.arrayEach(t.trim().split("&"),function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(I(r),I(o))}}),e})});var M={isResponse:b,toResponse:function(t,e){if(b(t))return t;var n=t.body,r={status:t.status,statusText:t.statusText,headers:t.headers};return q._A?new y(n instanceof Blob?n:new Blob([q.isString(n)?n:JSON.stringify(n)]),r,e):new y(q.isString(n)?n:JSON.stringify(n),r,e)}},W=q._N?sendHttp:q._F?function(t){return function(t){return t.$fetch?t.signal?g:v:q._F?"undefined"!=typeof AbortController&&"undefined"!=typeof AbortSignal?v:t.signal?g:v:g}(t).apply(this,arguments)}:g,K=0,Q="undefined"==typeof window?"":window,V=Q?Q.document:"",Y={aborted:"The user aborted a request.",timeout:"Request timeout.",failed:"Network request failed."};w.version="3.4.4",w.interceptors=G.interceptors,w.serialize=q.serialize,w.AbortController=N,w.use=function(t){t.install(w)},w.setup=function(t){q.objectAssign(U,t)};var Z=q.clearContext,tt=E("HEAD"),et=E("DELETE"),nt=R("GET",{jsonp:"callback"}),rt=R("GET"),ot=A("POST"),it=A("PUT"),st=A("PATCH"),at={doAll:function(t){var e=w.$Promise||Promise,n=w.$context;return Z(w),e.all(t.map(function(t){return t instanceof e||t instanceof Promise?t:q.isObject(t)?w(q.objectAssign({$context:n,$Promise:e},t)):t}),n)},ajax:w,fetch:_(E("GET")),fetchGet:_(rt),fetchPost:_(ot),fetchPut:_(it),fetchDelete:_(et),fetchPatch:_(st),fetchHead:_(tt),fetchJsonp:_(nt),doGet:T(rt),doPost:T(ot),doPut:T(it),doDelete:T(et),doPatch:T(st),doHead:T(tt),doJsonp:T(nt),getJSON:O(rt),postJSON:O(ot),putJSON:O(it),deleteJSON:O(et),patchJSON:O(st),headJSON:O(tt),jsonp:O(nt)};return w.mixin=function(t){q.objectEach(t,function(t,e){w[e]=q.isFunction(t)?function(){var e=t.apply(w.$context,arguments);return Z(w),e}:t})},w.mixin(at),w});