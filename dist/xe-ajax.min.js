/**
 * xe-ajax.js v3.2.11
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";function t(t){return"undefined"!=typeof FormData&&t instanceof FormData}function e(){return"function"==typeof Blob&&"function"==typeof FormData&&"function"==typeof FileReader}function n(t){return"string"==typeof t}function o(t){return t&&"object"==typeof t}function r(t){return"function"==typeof t}function i(){return location.origin||location.protocol+"//"+location.host}function s(t,e,n){for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function u(t,e,n){var r=[];return s(t,function(t,i){o(t)?r=r.concat(u(t,e+"["+i+"]",B(t))):r.push(encodeURIComponent(e+"["+(n?"":i)+"]")+"="+encodeURIComponent(t))}),r}function a(t){var e=[];return s(t,function(t,n){void 0!==t&&(o(t)?e=e.concat(u(t,n,B(t))):e.push(encodeURIComponent(n)+"="+encodeURIComponent(t)))}),e.join("&").replace(/%20/g,"+")}function c(t,e,n){if(t.forEach)t.forEach(e,n);else for(var o=0,r=t.length||0;o<r;o++)e.call(n,t[o],o,t)}function f(t){t.$context=t.$Promise=null}function h(t){return String(t).toLowerCase()}function d(t,e){this.$index=0,this.$list=function(t,e){var n=[];for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];n.push([o,r,[o,r]][e])}return n}(t,e),this.next=function(){return function(t,e){var n=t.$index++>=t.$list.length;return{done:n,value:n?void 0:e}}(this,this.$list[this.$index])}}function l(t){this._map={},t instanceof l?t.forEach(function(t,e){this.set(e,t)},this):s(t,function(t,e){this.set(e,t)},this)}function p(t){for(var e=0,n=J.length;e<n;e++)if(t===J[e][0])return e}function y(){this.onaborted=null,this._abortSignal={aborted:!1}}function m(){this.signal=new L}function b(t){return function(e){-1===t.indexOf(e)&&t.push(e)}}function g(t){var e=t.$Promise||Promise,n=e.resolve(t,t.$context);return c(I.reqQueue,function(o){n=n.then(function(n){return new e(function(t){o(n,function(){t(n)})},t.$context)}).catch(function(t){console.error(t)})}),n}function v(t,e){var n=t.$Promise||Promise,o=n.resolve(e,t.$context);return c(I.respQueue,function(e){o=o.then(function(o){return new n(function(n){e(o,function(e){e&&e.body&&e.status?n(T(e,t)):n(o)},t)},t.$context)}).catch(function(t){console.error(t)})}),o}function x(t){H(this,{url:"",body:null,params:null,signal:null},t),this.headers=new D(t.headers),this.method=String(this.method).toLocaleUpperCase(),this.bodyType=String(this.bodyType).toLowerCase(),this.signal&&r(this.signal.install)&&this.signal.install(this)}function w(t,e,n){this._request=n,this._response={body:new function(t,e){this.locked=!1,this._getBody=function(){var n=this,o=e.$Promise||Promise;return this.bodyUsed=!0,new o(function(e,o){n.locked?o(new TypeError("body stream already read")):(n.locked=!0,e(t))},e.$context)}}(t,n),bodyUsed:!1,url:n.url,status:e.status,statusText:e.statusText,redirected:302===e.status,headers:new D(e.headers||{}),type:"basic"},this._response.ok=n.validateStatus(this)}function $(t,e){return new(t.$Promise||Promise)(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}},t.$context)}function T(t,n){if("function"==typeof Response&&t.constructor===Response||t.constructor===w)return t;var o={status:t.status,statusText:t.statusText,headers:t.headers};return e()?new w(t.body instanceof Blob?t.body:new Blob([JSON.stringify(t.body)]),o,n):new w(JSON.stringify(t.body),o,n)}function P(t,e,n){var o=r(t.$fetch)?t.$fetch:self.fetch,i={_request:t,method:t.method,cache:t.cache,credentials:t.credentials,body:t.getBody(),headers:t.headers};t.timeout&&setTimeout(function(){n(new TypeError("Request timeout."))},t.timeout),t.signal&&t.signal.aborted?n(new TypeError("The user aborted a request.")):o(t.getUrl(),i).then(function(n){v(t,T(n,t)).then(e)}).catch(n)}function _(t,n,o){var i=r(t.$XMLHttpRequest)?t.$XMLHttpRequest:XMLHttpRequest,s=t.xhr=new i;s._request=t,s.open(t.method,t.getUrl(),!0),t.timeout&&setTimeout(function(){s.abort()},t.timeout),t.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.onload=function(){v(t,new w(s.response,{status:s.status,statusText:function(t){{if(1223===t.status||204===t.status)return"No Content";if(304===t.status)return"Not Modified";if(404===t.status)return"Not Found"}return(t.statusText||t.statusText||"").trim()}(s),headers:function(t){var e={};if(t.getAllResponseHeaders){var n=t.getAllResponseHeaders().trim();n&&c(n.split("\n"),function(t){var n=t.indexOf(":");e[t.slice(0,n).trim()]=t.slice(n+1).trim()})}return e}(s)},t)).then(n)},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Request timeout."))},s.onabort=function(){o(new TypeError("The user aborted a request."))},e()&&(s.responseType="blob"),"include"===t.credentials?s.withCredentials=!0:"omit"===t.credentials&&(s.withCredentials=!1),s.send(t.getBody()),t.$abort&&s.abort()}function j(t){t.script.parentNode===document.body&&document.body.removeChild(t.script);try{delete M[t.jsonpCallback]}catch(e){M[t.jsonpCallback]=void 0}}function E(t,e){j(t),e(new TypeError("JSONP request failed"))}function O(t,e,n){t.script=document.createElement("script"),g(t).then(function(){var o=t.script;if(t.jsonpCallback||(t.jsonpCallback="jsonp_xeajax_"+Date.now()+"_"+ ++Q),r(t.$jsonp))return t.$jsonp(o,t).then(function(n){v(t,T({status:200,body:n},t)).then(e)}).catch(function(t){n(t)});var i=t.getUrl();M[t.jsonpCallback]=function(n){!function(t,e,n){j(t),v(t,T(e,t)).then(n)}(t,{status:200,body:n},e)},o.type="text/javascript",o.src=i+(-1===i.indexOf("?")?"?":"&")+t.jsonp+"="+t.jsonpCallback,o.onerror=function(e){E(t,n)},t.timeout&&setTimeout(function(){E(t,n)},t.timeout),document.body.appendChild(o)})}function R(t){var e=H({},z,{headers:H({},z.headers)},t);return new(e.$Promise||Promise)(function(t,n){(e.jsonp?O:function(t,e,n){return g(t).then(function(){return G(t,e,n)})})(new x(e),t,n)},e.$context)}function S(t,e,n){var o=H({method:t,$context:R.$context,$Promise:R.$Promise},e,n);return f(R),o}function C(t){return function(){return R(t.apply(this,arguments))}}function q(t){return function(){var e=t.apply(this,arguments),n=e.$Promise||Promise;return R(e).then(function(t){return new n(function(e,n){t.json().then(function(o){(t.ok?e:n)(o)}).catch(function(t){n(null)})},this)})}}function A(t){return function(e,n){return S(t,{url:e},n)}}function U(t,e){return function(n,o,r){return S(t,H({url:n,params:o},e),r)}}function N(t){return function(e,n,o){return S(t,{url:e,body:n},o)}}function k(t){s(t,function(t,e){R[e]=r(t)?function(){var e=t.apply(R.$context,arguments);return f(R),e}:t})}var B=Array.isArray||function(t){return!!t&&t.constructor===Array},H=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}return t};H(l.prototype,{set:function(t,e){this._map[h(t)]=e},get:function(t){var e=h(t);return this.has(e)?this._map[e]:null},append:function(t,e){var n=h(t);this.has(n)?this._map[n]=this._map[n]+", "+e:this._map[n]=""+e},has:function(t){return this._map.hasOwnProperty(h(t))},keys:function(){return new d(this._map,0)},values:function(){return new d(this._map,1)},entries:function(){return new d(this._map,2)},delete:function(t){delete this._map[h(t)]},forEach:function(t,e){s(this._map,function(n,o,r){t.call(e,n,o,this)},this)}});var D="undefined"==typeof Headers?l:Headers,J=[];Object.defineProperty(y.prototype,"aborted",{get:function(){return this._abortSignal.aborted}}),H(y.prototype,{install:function(t){if(t.signal){var e=p(t.signal);void 0===e?J.push([t.signal,[t]]):J[e][1].push(t)}}}),H(m.prototype,{abort:function(){var t=p(this.signal);void 0!==t&&(c(J[t][1],function(e){e.abort(),J[t][0]._abortSignal.aborted=!0}),J.splice(t,1))}});var L="function"==typeof AbortSignal?AbortSignal:y,F="function"==typeof ot?ot:m,I={reqQueue:[],respQueue:[]},X={request:{use:b(I.reqQueue)},response:{use:b(I.respQueue)}};X.request.use(function(e,n){e.body&&"GET"!==e.method&&"HEAD"!==e.method&&(t(e.body)||(e.headers.set("Content-Type","application/x-www-form-urlencoded"),"json-data"!==e.bodyType&&"json_data"!==e.bodyType||e.headers.set("Content-Type","application/json; charset=utf-8"))),function(t){return!(!/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)||RegExp.$1===location.protocol&&RegExp.$2.split("/")[0]===location.host)}(e.getUrl())&&e.headers.set("X-Requested-With","XMLHttpRequest"),n()}),H(x.prototype,{abort:function(){this.xhr&&this.xhr.abort(),this.$abort=!0},getUrl:function(){var e=this.url,o="";if(e){if(r(this.transformParams)&&(this.params=this.transformParams(this.params||{},this)),this.params&&!t(this.params)){var s=function(t,e){if(t.includes)return t.includes(e);for(var n=0,o=t.length||0;n<o;n++)if(t[n]===e)return!0;return!1}(["no-store","no-cache","reload"],this.cache)?{_t:Date.now()}:{};o=n(this.params)?this.params:(r(this.paramsSerializer)?this.paramsSerializer:a)(H(s,this.params),this)}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),/\w+:\/{2}.*/.test(e)?e:0===e.indexOf("/")?i()+e:this.baseURL.replace(/\/$/,"")+"/"+e}return e},getBody:function(){var e=null,o=this.body;if(o&&"GET"!==this.method&&"HEAD"!==this.method)try{r(this.transformBody)&&(o=this.body=this.transformBody(o,this)||o),e=r(this.stringifyBody)?this.stringifyBody(o,this)||null:t(o)?o:n(o)?o:"form-data"===this.bodyType||"form_data"===this.bodyType?a(o):JSON.stringify(o)}catch(t){console.error(t)}return e}}),c(["body","bodyUsed","url","headers","status","statusText","ok","redirected","type"],function(t){Object.defineProperty(w.prototype,t,{get:function(){return this._response[t]}})}),H(w.prototype,{clone:function(){return new w(this.body,{status:this.status,statusText:this.statusText,headers:this.headers},this._request)},json:function(){return this.text().then(function(t){return JSON.parse(t)})},text:function(){return this.body._getBody()}}),e()&&H(w.prototype,{text:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=$(t,n);return n.readAsText(e),o})},blob:function(){return this.body._getBody()},arrayBuffer:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=$(t,n);return n.readAsArrayBuffer(e),o})},formData:function(){return this.text().then(function(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(r))}}),e})}});var G=self.fetch?function(t,e,n){return function(t){return t.$fetch?t.signal?_:P:self.fetch?"function"==typeof ot&&"function"==typeof AbortSignal?P:t.signal?_:P:_}(t).apply(this,arguments)}:_,Q=0,M="undefined"==typeof window?this:window,z={method:"GET",baseURL:function(){var t=location.pathname,e=function(t,e){if(r(t.lastIndexOf))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;n--)if(e===t[n])return n;return-1}(t,"/")+1;return i()+(e===t.length?t:t.substring(0,e))}(),cache:"default",credentials:"same-origin",bodyType:"json-data",log:!1,headers:{},validateStatus:function(t){return t.status>=200&&t.status<300}},W=R,K=A("HEAD"),V=A("DELETE"),Y=U("GET",{jsonp:"callback"}),Z=U("GET"),tt=N("POST"),et=N("PUT"),nt=N("PATCH"),ot=F,rt=C(K),it=C(V),st=C(Y),ut=C(Z),at=C(tt),ct=C(et),ft=C(nt),ht=q(K),dt=q(V),lt=q(Y),pt=q(Z),yt=q(tt),mt=q(et),bt=q(nt),gt={doAll:function(t){var e=R.$Promise||Promise,n=R.$context;return f(R),e.all(t.map(function(t){return o(t)?R(H({$context:n,$Promise:e},t)):t}),n)},ajax:W,fetch:function(t,e){return ut(t,null,e)},fetchGet:ut,fetchPost:at,fetchPut:ct,fetchDelete:it,fetchPatch:ft,fetchHead:rt,fetchJsonp:st,getJSON:pt,postJSON:yt,putJSON:mt,deleteJSON:dt,patchJSON:bt,headJSON:ht,jsonp:lt};return H(R,{use:function(t){t.install(R),z.log&&console.info("["+R.$name+"] Ready. Detected "+t.$name+" v"+t.version)},setup:function(t){H(z,t)},mixin:k,AbortController:ot,serialize:a,interceptors:X,version:"3.2.11",$name:"XEAjax"}),k(gt),R});