/*!
 * xe-ajax.js v3.0.6
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.XEAjax=a())}(this,function(){function r(aa){return typeof FormData!=="undefined"&&aa instanceof FormData}function v(aa){if(/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(aa.url)){if(RegExp.$1!==location.protocol||RegExp.$2.split("/")[0]!==location.host){return true}}return false}function L(aa){return aa&&typeof aa==="object"}function q(aa){return typeof aa==="function"}function H(ac,ad,ab){for(var aa in ac){if(ac.hasOwnProperty(aa)){ad.call(ab,ac[aa],aa,ac)}}}function S(ab,ad,ac){var aa=[];H(ab,function(af,ae){if(L(af)){aa=aa.concat(S(af,ad+"["+ae+"]",Array.isArray(af)))}else{aa.push(encodeURIComponent(ad+"["+(ac?"":ae)+"]")+"="+encodeURIComponent(af))}});return aa}function e(aa){var ab=[];H(aa,function(ad,ac){if(ad!==undefined){if(L(ad)){ab=ab.concat(S(ad,ac,Array.isArray(ad)))}else{ab.push(encodeURIComponent(ac)+"="+encodeURIComponent(ad))}}});return ab.join("&").replace(/%20/g,"+")}function V(aa){return String(aa).toLowerCase()}function D(){this._state={};this.set=function(aa,ab){this._state[V(aa)]=[ab]};this.get=function(aa){var ab=V(aa);return this.has(ab)?this._state[ab].join(", "):null};this.append=function(aa,ac){var ab=V(aa);if(this.has(ab)){return this._state[ab].push(ac)}else{this.set(ab,ac)}};this.has=function(aa){return !!this._state[V(aa)]};this["delete"]=function(aa){delete this._state[V(aa)]}}var j=[];function B(ac){for(var ab=0,aa=j.length;ab<aa;ab++){if(ac===j[ab][0]){return ab}}}function A(ab){if(ab.signal){var aa=B(ab.signal);if(aa===undefined){j.push([ab.signal,[ab]])}else{j[aa][1].push(ab)}}}function I(){}function y(){this.signal=new I()}Object.assign(y.prototype,{abort:function(){var aa=B(this.signal);if(aa!==undefined){j[aa][1].forEach(function(ab){setTimeout(function(){ab.abort()})});j.splice(aa,1)}}});var x=[];var F=[];function J(aa){return function(ab){if(aa.indexOf(ab)===-1){aa.push(ab)}}}function M(ab,aa){var ac=Promise.resolve(aa);ab.forEach(function(ad){ac=ac.then(function(ae){return new Promise(function(af){ad(ae,function(){af(ae)})})})["catch"](function(ae){console.error(ae)})});return ac}function u(aa){return M(x,aa)}function s(aa){return M(F,aa)}var K={request:{use:J(x)},response:{use:J(F)}};K.request.use(function(ab,aa){if(!r(ab.method==="GET"?ab.params:ab.body)){if(ab.method!=="GET"&&String(ab.bodyType).toLocaleUpperCase()==="JSON_DATA"){ab.setHeader("Content-Type","application/json; charset=utf-8")}else{ab.setHeader("Content-Type","application/x-www-form-urlencoded")}}if(ab.crossOrigin){ab.setHeader("X-Requested-With","XMLHttpRequest")}aa()});function Y(aa){Object.assign(this,{url:"",body:null,params:null,signal:null},aa);this.ABORT_RESPONSE=undefined;this.method=String(this.method).toLocaleUpperCase();this.crossOrigin=v(this);if(aa&&aa.jsonp){this.script=document.createElement("script")}else{this.xhr=aa.getXMLHttpRequest(this)}A(this)}Object.assign(Y.prototype,{abort:function(aa){this.xhr.abort(aa)},setHeader:function(aa,ab){this.headers[aa]=ab},getHeader:function(){return this.headers[name]},deleteHeader:function(aa){delete this.headers[aa]},clearHeader:function(){this.headers={}},getUrl:function(){var aa=this.url;var ab="";if(aa){if(q(this.transformParams)){this.params=this.transformParams(this.params||{},this)}if(this.params&&!r(this.params)){ab=q(this.paramsSerializer)?this.paramsSerializer(this):e(this.params)}if(ab){aa+=(aa.indexOf("?")===-1?"?":"&")+ab}if(/\w+:\/{2}.*/.test(aa)){return aa}return this.baseURL.replace(/\/$/,"")+"/"+aa.replace(/^\//,"")}return aa},getBody:function(){var aa=this;return new Promise(function(ad,ac){var ab=null;if(aa.body&&aa.method!=="GET"){try{if(q(aa.transformBody)){aa.body=aa.transformBody(aa.body||{},aa)||aa.body}if(q(aa.stringifyBody)){ab=aa.stringifyBody(aa.body,aa)||null}else{if(r(aa.body)){ab=aa.body}else{if(String(aa.bodyType).toLocaleUpperCase()==="FROM_DATA"){ab=e(aa.body)}else{ab=JSON.stringify(aa.body)}}}}catch(ae){console.error(ae)}}ad(ab)})}});function m(aa){this.locked=false;this._xhr=aa}Object.assign(m.prototype,{_getBody:function(){var aa=this;var ab=this._xhr;return new Promise(function(ae,ad){var ac={responseText:"",response:ab};if(ab&&ab.response!==undefined&&ab.status!==undefined){if(ab.responseText){ac.responseText=ab.responseText;try{ac.response=JSON.parse(ab.responseText)}catch(af){ac.response=null}}else{ac.response=ab.response;ac.responseText=JSON.stringify(ab.response)}}else{ac.responseText=JSON.stringify(ac.response)}if(aa.locked){ad(new TypeError("body stream already read"))}else{aa.locked=true;ae(ac)}})}});function N(ab,ad){var aa=this;this.body=new m(ad);this.bodyUsed=false;this.url=ab.url;this.headers=new D();this.status=0;this.statusText="";this.ok=false;this.redirected=false;this.type="basic";this.json=function(){return this.body._getBody().then(function(ae){aa.bodyUsed=true;return ae.response})};this.text=function(){return this.body._getBody().then(function(ae){aa.bodyUsed=true;
return ae.responseText})};if(ad&&ad.response!==undefined&&ad.status!==undefined){this.status=ad.status;this.redirected=this.status===302;this.ok=ab.getPromiseStatus(this);if(this.status===1223||this.status===204){this.statusText="No Content"}else{if(this.status===304){this.statusText="Not Modified"}else{this.statusText=(ad.statusText||this.statusText).trim()}}if(ad.getAllResponseHeaders){var ac=ad.getAllResponseHeaders().trim();if(ac){ac.split("\n").forEach(function(af){var ae=af.indexOf(":");this.headers.set(af.slice(0,ae).trim(),af.slice(ae+1).trim())},this)}}}}var a=typeof window==="undefined"?this:window;var R={method:"GET",baseURL:location.origin,async:true,credentials:true,bodyType:"JSON_DATA",headers:{Accept:"application/json, text/plain, */*;"},getXMLHttpRequest:function(){return new XMLHttpRequest()},getPromiseStatus:function(aa){return(aa.status>=200&&aa.status<300)||aa.status===304}};function b(aa){return new Promise(function(ac,ab){return(aa&&aa.jsonp?h:P)(new Y(Object.assign({},R,{headers:Object.assign({},R.headers)},aa)),ac,ab)})}function w(aa,ad,ac,ab){s(new N(aa,ad)).then(function(ae){ac(ae)})}function P(aa,ac,ab){var ad=aa.xhr;u(aa).then(function(){ad.open(aa.method,aa.getUrl(),aa.async!==false);if(aa.timeout&&!isNaN(aa.timeout)){ad.timeout=aa.timeout}H(aa.headers,function(af,ae){ad.setRequestHeader(ae,af)});ad.onreadystatechange=function(){if(ad.readyState===4){w(aa,ad,ac,ab)}};if(aa.credentials==="include"){aa.xhr.withCredentials=true}else{if(aa.credentials==="omit"){aa.xhr.withCredentials=false}}aa.getBody().then(function(ae){ad.send(ae)})["catch"](function(){ad.send()})})}var g=0;function h(ac,ae,ad){var aa=ac.script;var ab=ac.getUrl();if(!ac.jsonpCallback){ac.jsonpCallback="_xeajax_jsonp"+(++g)}a[ac.jsonpCallback]=function(af){k(ac,{status:200,response:af},ae,ad)};aa.type="text/javascript";aa.src=ab+(ab.indexOf("?")===-1?"?":"&")+ac.jsonp+"="+ac.jsonpCallback;aa.onerror=function(af){k(ac,{status:500,response:null},ae,ad)};if(q(ac.sendJSONP)){ac.sendJSONP(aa,ac,ae,ad)}else{document.body.appendChild(aa)}}function k(ab,ae,ad,ac){var aa=new N(ab,ae);delete a[ab.jsonpCallback];if(q(ab.sendEndJSONP)){ab.sendEndJSONP(ab.script,ab)}else{document.body.removeChild(ab.script)}aa.json().then(function(af){(aa.ok?ad:ac)(af)})["catch"](function(af){ac(af)})}var i=function i(aa){Object.assign(R,aa)};function Z(ac,ab,aa){return b(Object.assign({method:ac},ab,aa))}function X(aa){return function(){return aa.apply(this,arguments).then(function(ab){return new Promise(function(ad,ac){ab.json().then(function(ae){(ab.ok?ad:ac)(ae)})["catch"](function(ae){ac(ae)})})})}}var E=b;function n(aa){return Promise.all(aa.map(function(ab){if(ab instanceof Promise){return ab}else{if(ab&&L(ab)){return E(ab)}}return ab}))}function p(aa,ac,ab){return Z("GET",L(aa)?{}:{url:aa,params:ac},ab)}function z(ab,aa,ac){return Z("POST",L(ab)?{}:{url:ab,body:aa},ac)}function c(ab,aa,ac){return Z("PUT",L(ab)?{}:{url:ab,body:aa},ac)}function o(ab,aa,ac){return Z("PATCH",L(ab)?{}:{url:ab,body:aa},ac)}function f(ab,aa,ac){return Z("DELETE",L(ab)?{}:{url:ab,body:aa},ac)}function l(aa,ac,ab){return Z("GET",{url:aa,params:ac,jsonp:"callback"},ab)}var O=X(p);var Q=X(z);var d=X(c);var t=X(o);var U=X(f);var C=y;var G={doAll:n,fetchGet:p,getJSON:O,fetchPost:z,postJSON:Q,fetchPut:c,putJSON:d,fetchPatch:o,patchJSON:t,fetchDelete:f,deleteJSON:U,jsonp:l,setup:i,interceptors:K,AjaxController:C};function W(aa){return Object.assign(b,aa)}function T(aa){aa.install(b)}W(G);b.use=T;b.mixin=W;return b}));