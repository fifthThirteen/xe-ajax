/**
 * xe-ajax.js v3.2.3
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.XEAjax=n()}(this,function(){"use strict";function t(t){return"undefined"!=typeof FormData&&t instanceof FormData}function n(t){return t&&"object"==typeof t}function e(t){return"function"==typeof t}function o(){return location.origin||location.protocol+"//"+location.host}function r(t,n,e){for(var o in t)t.hasOwnProperty(o)&&n.call(e,t[o],o,t)}function i(t,e,o){var s=[];return r(t,function(t,r){n(t)?s=s.concat(i(t,e+"["+r+"]",A(t))):s.push(encodeURIComponent(e+"["+(o?"":r)+"]")+"="+encodeURIComponent(t))}),s}function s(t){var e=[];return r(t,function(t,o){void 0!==t&&(n(t)?e=e.concat(i(t,o,A(t))):e.push(encodeURIComponent(o)+"="+encodeURIComponent(t)))}),e.join("&").replace(/%20/g,"+")}function u(t,n,e){if(t.forEach)t.forEach(n,e);else for(var o=0,r=t.length||0;o<r;o++)n.call(e,t[o],o,t)}function c(t){t.$context=t.$Promise=null}function a(t){return String(t).toLowerCase()}function f(t,n){var e=[];for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];e.push([o,r.join(", "),[o,r.join(", ")]][n])}return e}function h(t){this.$index=0,this.$list=t,this.next=function(){return function(t,n){var e=t.$index++>=t.$list.length;return{done:e,value:e?void 0:n}}(this,this.$list[this.$index])}}function d(t){try{var n=function(t){return"string"==typeof t}(t.body)?t.body:JSON.stringify(t.body)}catch(t){n=""}this.status=t.status,this.responseHeaders=t.headers,this.response=n,this.responseText=n}function l(t){for(var n=0,e=H.length;n<e;n++)if(t===H[n][0])return n}function p(){var t=!1;Object.defineProperty(this,"aborted",{get:function(){return t}})}function y(){this.signal=new p}function m(t){return function(n){-1===t.indexOf(n)&&t.push(n)}}function b(t){var n=t.$Promise||Promise,e=n.resolve(t,t.$context);return u(R.request,function(o){e=e.then(function(e){return new n(function(t){o(e,function(){t(e)})},t.$context)}).catch(function(t){console.error(t)})}),e}function v(t){S(this,{url:"",body:null,params:null,signal:null},t),this.headers=new C(t.headers),this.method=String(this.method).toLocaleUpperCase(),this.bodyType=String(this.bodyType).toLocaleUpperCase(),this.crossOrigin=function(t){return!(!/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t.url)||RegExp.$1===location.protocol&&RegExp.$2.split("/")[0]===location.host)}(this),this.signal&&e(this.signal.install)&&this.signal.install(this)}function g(t,n,e){t.$complete=!0,function(t,n){var e=t.$Promise||Promise,o=e.resolve(n,t.$context);return u(R.response,function(n){o=o.then(function(o){return new e(function(e){n(o,function(n){n&&n.constructor!==x?e(new x(t,new d(n))):e(o)},t)},t.$context)}).catch(function(t){console.error(t)})}),o}(t,function(t,n){if(n)if("undefined"==typeof Response){if(n.constructor===x)return n}else if(n.constructor===Response||n.constructor===x)return n;return new x(t,new d(n))}(t,n)).then(function(t){e(t)})}function x(t,n){var e=this,o={};u(["body","bodyUsed","url","headers","status","statusText","ok","redirected","type"],function(t){Object.defineProperty(e,t,{get:function(){return o[t]}})}),o.body=new function(t,n){this.locked=!1,this._getBody=function(){var e=this,o=n.$Promise||Promise;return this.bodyUsed=!0,new o(function(n,o){e.locked?o(new TypeError("body stream already read")):(e.locked=!0,n(t))},n.$context)}}(n.responseText||null,t),o.bodyUsed=!1,o.url=t.url,o.headers=function(t,n){var e=new C;if(n.getAllResponseHeaders){var o=n.getAllResponseHeaders().trim();o&&u(o.split("\n"),function(t){var n=t.indexOf(":");e.set(t.slice(0,n).trim(),t.slice(n+1).trim())})}return e}(0,n),o.status=n.status,o.statusText=function(t,n){{if(1223===n.status||204===n.status)return"No Content";if(304===n.status)return"Not Modified";if(404===n.status)return"Not Found"}return(n.statusText||n.statusText||"").trim()}(0,n),o.ok=t.validateStatus(this),o.redirected=302===o.status,o.type="basic"}function $(t,n,e,o){t.script.parentNode===document.body&&document.body.removeChild(t.script),delete D[t.jsonpCallback],g(t,n,e)}function P(t){var n=S({},J,{headers:S({},J.headers)},t);return new(n.$Promise||Promise)(function(t,o){return(n.jsonp?function(t,n,o){t.script=document.createElement("script"),b(t).then(function(){var r=t.script;if(t.jsonpCallback||(t.jsonpCallback="_xeajax_jsonp"+ ++U),e(t.$jsonp))return new Promise(function(n,e){t.$jsonp(r,t,n,e)}).then(function(e){g(t,e,n)}).catch(function(n){g(t,n,o)});var i=t.getUrl();D[t.jsonpCallback]=function(e){$(t,{status:200,body:e},n)},r.type="text/javascript",r.src=i+(-1===i.indexOf("?")?"?":"&")+t.jsonp+"="+t.jsonpCallback,r.onerror=function(e){$(t,{status:500,body:null},n)},r.onabort=function(e){$(t,{status:0,body:null},n)},t.timeout&&setTimeout(function(){r.onabort()},t.timeout),document.body.appendChild(r)})}:function(t,n,o){b(t).then(function(){if(t.signal||"function"!=typeof fetch){var r=e(t.$XMLHttpRequest)?t.$XMLHttpRequest:XMLHttpRequest,i=t.xhr=new r;i._request=t,i.open(t.method,t.getUrl(),!0),t.timeout&&setTimeout(function(){g(t,{status:0,body:null},n)},t.timeout),t.headers.forEach(function(t,n){i.setRequestHeader(n,t)}),i.onreadystatechange=function(){4===i.readyState&&g(t,new x(t,i),n)},"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),t.getBody().catch(function(){return null}).then(function(n){i.send(n),t.$abort&&i.abort()})}else{var s=e(t.$fetch)?t.$fetch:fetch;t.getBody().then(function(e){var r={_request:t,method:t.method,cache:t.cache,credentials:t.credentials,body:e,headers:t.headers};t.timeout&&setTimeout(function(){g(t,{status:0,body:null},n)},t.timeout),s(t.getUrl(),r).then(function(e){g(t,e,n)}).catch(function(n){g(t,n,o)})})}})})(new v(n),t,o)},n.$context)}function T(t,n,e){var o=S({method:t,$context:P.$context,$Promise:P.$Promise},n,e);return c(P),o}function w(t){return function(){return k(t.apply(this,arguments))}}function E(t){return function(){var n=t.apply(this,arguments),e=n.$Promise||Promise;return k(n).then(function(t){return new e(function(n,e){t.json().then(function(o){(t.ok?n:e)(o)}).catch(function(t){e(t)})},this)})}}function O(t,e){return function(o,r,i){return T(t,n(o)?o:S({url:o,params:r},e),i)}}function j(t){r(t,function(t,n){P[n]=e(t)?function(){var n=t.apply(P.$context,arguments);return c(P),n}:t})}var A=Array.isArray||function(t){return!!t&&t.constructor===Array},S=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++){n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},C="function"==typeof Headers?Headers:function(t){var n={};this.set=function(t,e){n[a(t)]=[e]},this.get=function(t){var e=a(t);return this.has(e)?n[e].join(", "):null},this.append=function(t,e){var o=a(t);if(this.has(o))return n[o].push(e);this.set(o,e)},this.has=function(t){return!!n[a(t)]},this.keys=function(){return new h(f(n,0))},this.values=function(){return new h(f(n,1))},this.entries=function(){return new h(f(n,2))},this.delete=function(t){delete n[a(t)]},this.forEach=function(t,e){r(n,function(n,o,r){t.call(e,n.join(", "),o,this)},this)},t instanceof C?t.forEach(function(t,n){this.set(n,t)},this):r(t,function(t,n){this.set(n,t)},this)};S(d.prototype,{getAllResponseHeaders:function(){var t="",n=this.responseHeaders;if(n)for(var e in n)n.hasOwnProperty(e)&&(t+=e+": "+n[e]+"\n");return t}});var H=[];S(p.prototype,{install:function(t){if(t.signal){var n=l(t.signal);void 0===n?H.push([t.signal,[t]]):H[n][1].push(t)}}}),S(y.prototype,{abort:function(){var t=l(this.signal);void 0!==t&&(u(H[t][1],function(t){t.abort()}),H.splice(t,1))}});var R={request:[],response:[]},N={request:{use:m(R.request)},response:{use:m(R.response)}};N.request.use(function(n,e){n.body&&"GET"!==n.method&&"HEAD"!==n.method&&(n.headers.set("Content-Type","application/x-www-form-urlencoded"),t(n.body)||"JSON_DATA"!==n.bodyType||n.headers.set("Content-Type","application/json; charset=utf-8")),n.crossOrigin&&n.headers.set("X-Requested-With","XMLHttpRequest"),e()}),S(v.prototype,{abort:function(){this.xhr&&this.xhr.abort(),this.$abort=!0},getUrl:function(){var n=this.url,r="";return n?(e(this.transformParams)&&(this.params=this.transformParams(this.params||{},this)),this.params&&!t(this.params)&&(r=(e(this.paramsSerializer)?this.paramsSerializer:s)(S(function(t,n){if(t.includes)return t.includes(n);for(var e=0,o=t.length||0;e<o;e++)if(t[e]===n)return!0;return!1}(["no-store","no-cache","reload"],this.cache)?{_:Date.now()}:{},this.params),this)),r&&(n+=(-1===n.indexOf("?")?"?":"&")+r),/\w+:\/{2}.*/.test(n)?n:0===n.indexOf("/")?o()+n:this.baseURL.replace(/\/$/,"")+"/"+n):n},getBody:function(){var n=this;return new(n.$Promise||Promise)(function(o,r){var i=null;if(n.body&&"GET"!==n.method&&"HEAD"!==n.method)try{e(n.transformBody)&&(n.body=n.transformBody(n.body||{},n)||n.body),i=e(n.stringifyBody)?n.stringifyBody(n.body,n)||null:t(n.body)?n.body:"FORM_DATA"===n.bodyType?s(n.body):JSON.stringify(n.body)}catch(t){console.error(t)}o(i)},n.$context)}}),S(x.prototype,{json:function(){return this.body._getBody().then(function(t){return JSON.parse(t)})},text:function(){return this.body._getBody()}});var U=0,D="undefined"==typeof window?this:window,J={method:"GET",baseURL:function(){var t=location.pathname,n=function(t,n){if(e(t.lastIndexOf))return t.lastIndexOf(n);for(var o=t.length-1;o>=0;o--)if(n===t[o])return o;return-1}(t,"/")+1;return o()+(n===t.length?t:t.substring(0,n))}(),cache:"default",credentials:"same-origin",bodyType:"JSON_DATA",log:!1,headers:{Accept:"application/json, text/plain, */*;"},validateStatus:function(t){return t.status>=200&&t.status<300}},k=P,q={HEAD:O("HEAD"),GET:O("GET"),JSONP:O("GET",{jsonp:"callback"})};u(["POST","PUT","DELETE","PATCH"],function(t){q[t]=function(e,o,r){return T(t,n(e)?e:{url:e,body:o},r)}});var L=w(q.HEAD),_=w(q.GET),B=w(q.POST),G=w(q.PUT),X=w(q.DELETE),I=w(q.PATCH),M=w(q.JSONP),F=E(q.HEAD),z=E(q.GET),W=E(q.POST),K=E(q.PUT),Q=E(q.DELETE),V=E(q.PATCH),Y=E(q.JSONP),Z={doAll:function(t){var e=P.$Promise||Promise,o=P.$context;return c(P),e.all(t.map(function(t){return t instanceof e?t:t&&n(t)?k(S({$context:o,$Promise:e},t)):t}),o)},ajax:k,fetchGet:_,fetchPost:B,fetchPut:G,fetchDelete:X,fetchPatch:I,fetchHead:L,fetchJsonp:M,getJSON:z,postJSON:W,putJSON:K,deleteJSON:Q,patchJSON:V,headJSON:F,jsonp:Y};return S(P,{use:function(t){t.install(P),J.log&&console.info("["+P.$name+"] Ready. Detected "+t.$name+" v"+t.version)},setup:function(t){S(J,t)},mixin:j,AbortController:y,serialize:s,interceptors:N,version:"3.2.3",$name:"XEAjax"}),j(Z),P});