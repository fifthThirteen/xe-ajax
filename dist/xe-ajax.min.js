/**
 * xe-ajax.js v3.2.9
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjax=e()}(this,function(){"use strict";function t(t){return"undefined"!=typeof FormData&&t instanceof FormData}function e(){return"function"==typeof Blob&&"function"==typeof FormData&&"function"==typeof FileReader}function n(t){return t&&"object"==typeof t}function o(t){return"function"==typeof t}function r(){return location.origin||location.protocol+"//"+location.host}function i(t,e,n){for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function s(t,e,o){var r=[];return i(t,function(t,i){n(t)?r=r.concat(s(t,e+"["+i+"]",R(t))):r.push(encodeURIComponent(e+"["+(o?"":i)+"]")+"="+encodeURIComponent(t))}),r}function u(t){var e=[];return i(t,function(t,o){void 0!==t&&(n(t)?e=e.concat(s(t,o,R(t))):e.push(encodeURIComponent(o)+"="+encodeURIComponent(t)))}),e.join("&").replace(/%20/g,"+")}function a(t,e,n){if(t.forEach)t.forEach(e,n);else for(var o=0,r=t.length||0;o<r;o++)e.call(n,t[o],o,t)}function c(t){t.$context=t.$Promise=null}function f(t){return String(t).toLowerCase()}function h(t,e){this.$index=0,this.$list=function(t,e){var n=[];for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];n.push([o,r,[o,r]][e])}return n}(t,e),this.next=function(){return function(t,e){var n=t.$index++>=t.$list.length;return{done:n,value:n?void 0:e}}(this,this.$list[this.$index])}}function d(t){this._map={},t instanceof d?t.forEach(function(t,e){this.set(e,t)},this):i(t,function(t,e){this.set(e,t)},this)}function l(t){for(var e=0,n=N.length;e<n;e++)if(t===N[e][0])return e}function p(){this.onaborted=null,this._abortSignal={aborted:!1}}function y(){this.signal=new U}function m(t){return function(e){-1===t.indexOf(e)&&t.push(e)}}function b(t){var e=t.$Promise||Promise,n=e.resolve(t,t.$context);return a(D.reqQueue,function(o){n=n.then(function(n){return new e(function(t){o(n,function(){t(n)})},t.$context)}).catch(function(t){console.error(t)})}),n}function v(t,e){var n=t.$Promise||Promise,o=n.resolve(e,t.$context);return a(D.respQueue,function(e){o=o.then(function(o){return new n(function(n){e(o,function(e){e&&e.body&&e.status?n(T(e,t)):n(o)},t)},t.$context)}).catch(function(t){console.error(t)})}),o}function g(t){q(this,{url:"",body:null,params:null,signal:null},t),this.headers=new A(t.headers),this.method=String(this.method).toLocaleUpperCase(),this.bodyType=String(this.bodyType).toLowerCase(),this.signal&&o(this.signal.install)&&this.signal.install(this)}function x(t,e,n){this._request=n,this._response={body:new function(t,e){this.locked=!1,this._getBody=function(){var n=this,o=e.$Promise||Promise;return this.bodyUsed=!0,new o(function(e,o){n.locked?o(new TypeError("body stream already read")):(n.locked=!0,e(t))},e.$context)}}(t,n),bodyUsed:!1,url:n.url,status:e.status,statusText:e.statusText,redirected:302===e.status,headers:new A(e.headers||{}),type:"basic"},this._response.ok=n.validateStatus(this)}function w(t,e){return new(t.$Promise||Promise)(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}},t.$context)}function T(t,n){if("function"==typeof Response&&t.constructor===Response||t.constructor===x)return t;var o={status:t.status,statusText:t.statusText,headers:t.headers};return e()?new x(t.body instanceof Blob?t.body:new Blob([JSON.stringify(t.body)]),o,n):new x(JSON.stringify(t.body),o,n)}function $(t,n,r){var i=o(t.$XMLHttpRequest)?t.$XMLHttpRequest:XMLHttpRequest,s=t.xhr=new i;s._request=t,s.open(t.method,t.getUrl(),!0),t.timeout&&setTimeout(function(){s.abort()},t.timeout),t.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.onload=function(){v(t,new x(s.response,{status:s.status,statusText:function(t){{if(1223===t.status||204===t.status)return"No Content";if(304===t.status)return"Not Modified";if(404===t.status)return"Not Found"}return(t.statusText||t.statusText||"").trim()}(s),headers:function(t){var e={};if(t.getAllResponseHeaders){var n=t.getAllResponseHeaders().trim();n&&a(n.split("\n"),function(t){var n=t.indexOf(":");e[t.slice(0,n).trim()]=t.slice(n+1).trim()})}return e}(s)},t)).then(n)},s.onerror=function(){v(t,new TypeError("Network request failed")).then(r)},s.ontimeout=function(){v(t,new TypeError("Network request failed")).then(r)},e()&&(s.responseType="blob"),"include"===t.credentials?s.withCredentials=!0:"omit"===t.credentials&&(s.withCredentials=!1),t.getBody().catch(function(){return null}).then(function(e){s.send(e),t.$abort&&s.abort()})}function P(t,e,n,o){t.script.parentNode===document.body&&document.body.removeChild(t.script),delete L[t.jsonpCallback],v(t,T(e,t)).then(n)}function E(t){var e=q({},G,{headers:q({},G.headers)},t);return new(e.$Promise||Promise)(function(t,n){(e.jsonp?function(t,e,n){t.script=document.createElement("script"),b(t).then(function(){var n=t.script;if(t.jsonpCallback||(t.jsonpCallback="jsonp_xeajax_"+Date.now()+"_"+ ++J),o(t.$jsonp))return t.$jsonp(n,t).then(function(n){v(t,T(n,t)).then(e)});var r=t.getUrl();L[t.jsonpCallback]=function(n){P(t,{status:200,body:n},e)},n.type="text/javascript",n.src=r+(-1===r.indexOf("?")?"?":"&")+t.jsonp+"="+t.jsonpCallback,n.onerror=function(n){P(t,{status:500,body:null},e)},n.onabort=function(n){P(t,{status:0,body:null},e)},t.timeout&&setTimeout(function(){n.onabort()},t.timeout),document.body.appendChild(n)})}:function(t,e,n){return b(t).then(function(){return B(t,e,n)})})(new g(e),t,n)},e.$context)}function _(t,e,n){var o=q({method:t,$context:E.$context,$Promise:E.$Promise},e,n);return c(E),o}function j(t){return function(){return E(t.apply(this,arguments))}}function O(t){return function(){var e=t.apply(this,arguments),n=e.$Promise||Promise;return E(e).then(function(t){return new n(function(e,n){t.json().then(function(o){(t.ok?e:n)(o)}).catch(function(t){n(null)})},this)})}}function S(t,e){return function(o,r,i){return _(t,n(o)?o:q({url:o,params:r},e),i)}}function C(t){i(t,function(t,e){E[e]=o(t)?function(){var e=t.apply(E.$context,arguments);return c(E),e}:t})}var R=Array.isArray||function(t){return!!t&&t.constructor===Array},q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}return t};q(d.prototype,{set:function(t,e){this._map[f(t)]=e},get:function(t){var e=f(t);return this.has(e)?this._map[e]:null},append:function(t,e){var n=f(t);this.has(n)?this._map[n]=this._map[n]+", "+e:this._map[n]=""+e},has:function(t){return this._map.hasOwnProperty(f(t))},keys:function(){return new h(this._map,0)},values:function(){return new h(this._map,1)},entries:function(){return new h(this._map,2)},delete:function(t){delete this._map[f(t)]},forEach:function(t,e){i(this._map,function(n,o,r){t.call(e,n,o,this)},this)}});var A="undefined"==typeof Headers?d:Headers,N=[];Object.defineProperty(p.prototype,"aborted",{get:function(){return this._abortSignal.aborted}}),q(p.prototype,{install:function(t){if(t.signal){var e=l(t.signal);void 0===e?N.push([t.signal,[t]]):N[e][1].push(t)}}}),q(y.prototype,{abort:function(){var t=l(this.signal);void 0!==t&&(a(N[t][1],function(e){e.abort(),N[t][0]._abortSignal.aborted=!0}),N.splice(t,1))}});var U=p,H=y,D={reqQueue:[],respQueue:[]},k={request:{use:m(D.reqQueue)},response:{use:m(D.respQueue)}};k.request.use(function(e,n){e.body&&"GET"!==e.method&&"HEAD"!==e.method&&(t(e.body)||(e.headers.set("Content-Type","application/x-www-form-urlencoded"),"json-data"!==e.bodyType&&"json_data"!==e.bodyType||e.headers.set("Content-Type","application/json; charset=utf-8"))),function(t){return!(!/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(t)||RegExp.$1===location.protocol&&RegExp.$2.split("/")[0]===location.host)}(e.getUrl())&&e.headers.set("X-Requested-With","XMLHttpRequest"),n()}),q(g.prototype,{abort:function(){this.xhr&&this.xhr.abort(),this.$abort=!0},getUrl:function(){var e=this.url,n="";return e?(o(this.transformParams)&&(this.params=this.transformParams(this.params||{},this)),this.params&&!t(this.params)&&(n=(o(this.paramsSerializer)?this.paramsSerializer:u)(q(function(t,e){if(t.includes)return t.includes(e);for(var n=0,o=t.length||0;n<o;n++)if(t[n]===e)return!0;return!1}(["no-store","no-cache","reload"],this.cache)?{_:Date.now()}:{},this.params),this)),n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),/\w+:\/{2}.*/.test(e)?e:0===e.indexOf("/")?r()+e:this.baseURL.replace(/\/$/,"")+"/"+e):e},getBody:function(){var e=this;return new(e.$Promise||Promise)(function(n,r){var i=null;if(e.body&&"GET"!==e.method&&"HEAD"!==e.method)try{o(e.transformBody)&&(e.body=e.transformBody(e.body||{},e)||e.body),i=o(e.stringifyBody)?e.stringifyBody(e.body,e)||null:t(e.body)?e.body:"form-data"===e.bodyType||"form_data"===e.bodyType?u(e.body):JSON.stringify(e.body)}catch(t){console.error(t)}n(i)},e.$context)}}),a(["body","bodyUsed","url","headers","status","statusText","ok","redirected","type"],function(t){Object.defineProperty(x.prototype,t,{get:function(){return this._response[t]}})}),q(x.prototype,{clone:function(){return new x(this.body,{status:this.status,statusText:this.statusText,headers:this.headers},this._request)},json:function(){return this.text().then(function(t){return JSON.parse(t)})},text:function(){return this.body._getBody()}}),e()&&q(x.prototype,{text:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=w(t,n);return n.readAsText(e),o})},blob:function(){return this.body._getBody()},arrayBuffer:function(){var t=this._request;return this.blob().then(function(e){var n=new FileReader,o=w(t,n);return n.readAsArrayBuffer(e),o})},formData:function(){return this.text().then(function(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(r))}}),e})}});var B=self.fetch?function(t,e,n){return(t.signal?$:function(t,e,n){var r=o(t.$fetch)?t.$fetch:fetch;t.getBody().then(function(o){var i={_request:t,method:t.method,cache:t.cache,credentials:t.credentials,body:o,headers:t.headers};t.timeout&&setTimeout(function(){v(t,new TypeError("Network request failed")).then(n)},t.timeout),r(t.getUrl(),i).then(function(n){v(t,T(n,t)).then(e)}).catch(function(e){v(t,new TypeError("Network request failed")).then(n)})})}).apply(this,arguments)}:$,J=0,L="undefined"==typeof window?this:window,G={method:"GET",baseURL:function(){var t=location.pathname,e=function(t,e){if(o(t.lastIndexOf))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;n--)if(e===t[n])return n;return-1}(t,"/")+1;return r()+(e===t.length?t:t.substring(0,e))}(),cache:"default",credentials:"same-origin",bodyType:"json-data",log:!1,headers:{},validateStatus:function(t){return t.status>=200&&t.status<300}},F=E,I={HEAD:S("HEAD"),GET:S("GET"),JSONP:S("GET",{jsonp:"callback"})};a(["POST","PUT","DELETE","PATCH"],function(t){I[t]=function(e,o,r){return _(t,n(e)?e:{url:e,body:o},r)}});var X=H,Q=j(I.HEAD),M=j(I.GET),z=j(I.POST),W=j(I.PUT),K=j(I.DELETE),V=j(I.PATCH),Y=j(I.JSONP),Z=O(I.HEAD),tt=O(I.GET),et=O(I.POST),nt=O(I.PUT),ot=O(I.DELETE),rt=O(I.PATCH),it=O(I.JSONP),st={doAll:function(t){var e=E.$Promise||Promise,o=E.$context;return c(E),e.all(t.map(function(t){return n(t)?E(q({$context:o,$Promise:e},t)):t}),o)},ajax:F,fetch:function(t,e){return M(t,null,e)},fetchGet:M,fetchPost:z,fetchPut:W,fetchDelete:K,fetchPatch:V,fetchHead:Q,fetchJsonp:Y,getJSON:tt,postJSON:et,putJSON:nt,deleteJSON:ot,patchJSON:rt,headJSON:Z,jsonp:it};return q(E,{use:function(t){t.install(E),G.log&&console.info("["+E.$name+"] Ready. Detected "+t.$name+" v"+t.version)},setup:function(t){q(G,t)},mixin:C,AbortController:X,serialize:u,interceptors:k,version:"3.2.9",$name:"XEAjax"}),C(st),E});